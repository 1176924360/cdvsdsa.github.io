<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-05-29T12:48:51.574Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>å˜¤å˜¤æ€ª&amp;&amp;ğŸ¶</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySQLå­¦ä¹ _diay01</title>
    <link href="http://yoursite.com/2019/05/29/MySQL%E5%AD%A6%E4%B9%A0-diay011/"/>
    <id>http://yoursite.com/2019/05/29/MySQLå­¦ä¹ -diay011/</id>
    <published>2019-05-29T12:19:20.000Z</published>
    <updated>2019-05-29T12:48:51.574Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQLæ·±å…¥å­¦ä¹ -01"><a href="#MySQLæ·±å…¥å­¦ä¹ -01" class="headerlink" title="MySQLæ·±å…¥å­¦ä¹ _01"></a>MySQLæ·±å…¥å­¦ä¹ _01</h2><h3 id="å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“"><a href="#å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“" class="headerlink" title="å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“"></a>å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“</h3><p>MyISAMã€InnoDBä¸ºå¸¸ç”¨çš„ä¸¤ä¸ªMySQLæ•°æ®åº“å­˜å‚¨å¼•æ“ï¼Œå…¶åŒºåˆ«ä¸ºï¼š</p><a id="more"></a><table><thead><tr><th style="text-align:center">å±æ€§</th><th style="text-align:center">MyISAM</th><th style="text-align:center">InnoDB</th></tr></thead><tbody><tr><td style="text-align:center">ä¸»å¤–é”®</td><td style="text-align:center">N</td><td style="text-align:center">Y</td></tr><tr><td style="text-align:center">äº‹åŠ¡</td><td style="text-align:center">N</td><td style="text-align:center">Y</td></tr><tr><td style="text-align:center">è¡Œè¡¨é”</td><td style="text-align:center">è¡¨é”</td><td style="text-align:center">è¡Œé”</td></tr><tr><td style="text-align:center">ç¼“å­˜</td><td style="text-align:center">åªç¼“å­˜ç´¢å¼•</td><td style="text-align:center">æ—¢ç¼“å­˜ç´¢å¼•ä¹Ÿç¼“å­˜çœŸå®æ•°æ®</td></tr><tr><td style="text-align:center">è¡¨ç©ºé—´</td><td style="text-align:center">å°</td><td style="text-align:center">å¤§</td></tr><tr><td style="text-align:center">å…³æ³¨ç‚¹</td><td style="text-align:center">æ€§èƒ½</td><td style="text-align:center">äº‹åŠ¡</td></tr></tbody></table><h3 id="å»ºç«‹ç´¢å¼•"><a href="#å»ºç«‹ç´¢å¼•" class="headerlink" title="å»ºç«‹ç´¢å¼•"></a>å»ºç«‹ç´¢å¼•</h3><p>å‡è®¾æœ‰ä¸€å¼ userè¡¨ï¼Œè¡¨ä¸­æœ‰idã€nameã€emailã€num</p><ul><li>å¦‚æœæŸ¥æ‰¾è¡¨çš„æ¡ä»¶ä¸ºname<br>å»ºç«‹å•å€¼ç´¢å¼•ï¼šcreate index idx_user_name on user(name);</li><li>æœæŸ¥æ‰¾è¡¨çš„æ¡ä»¶ä¸ºnameä¸email<br>å»ºç«‹å¤åˆç´¢å¼•ï¼šcreate index idx_user_nameEmail on user(name,email);</li></ul><h3 id="ä»€ä¹ˆæ˜¯ç´¢å¼•"><a href="#ä»€ä¹ˆæ˜¯ç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ˜¯ç´¢å¼•"></a>ä»€ä¹ˆæ˜¯ç´¢å¼•</h3><p>ç´¢å¼•æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å¾—æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œç´¢å¼•çš„ç›®çš„åœ¨äºæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚å¯ä»¥ç†è§£ä¸ºæ’å¥½åºçš„å¿«é€ŸæŸ¥æ‰¾çš„æ•°æ®ç»“æ„ã€‚åœ¨Javaå¼€å‘ä¸­ï¼Œç´¢å¼•ä¸€èˆ¬çš„æ•°æ®ç»“æ„ä¸ºBTreeã€‚</p><h3 id="ç´¢å¼•çš„ä¼˜åŠ¿"><a href="#ç´¢å¼•çš„ä¼˜åŠ¿" class="headerlink" title="ç´¢å¼•çš„ä¼˜åŠ¿"></a>ç´¢å¼•çš„ä¼˜åŠ¿</h3><p>1.æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬<br>2.é€šè¿‡ç´¢å¼•å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºæˆæœ¬ï¼Œé™ä½CPUçš„æ¶ˆè€—</p><h3 id="éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"><a href="#éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—" class="headerlink" title="éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"></a>éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—</h3><p>1.ä¸»å»ºä¼šå»ºç«‹çš„ä¸ºå”¯ä¸€ç´¢å¼•<br>2.é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ<br>3.å¤–é”®å…³ç³»<br>4.æŸ¥è¯¢ä¸­æ’åºçš„å­—æ®µ<br>5.æŸ¥è¯¢ä¸­ç»Ÿè®¡æˆ–åˆ†ç»„çš„å­—æ®µ</p><h3 id="ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"><a href="#ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—" class="headerlink" title="ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"></a>ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—</h3><p>1.é¢‘ç¹æ›´æ–°çš„å­—æ®µ<br>2.whereæ¡ä»¶ç”¨ä¸åˆ°çš„å­—æ®µ<br>3.è¡¨è®°å½•å¤ªå°‘(å°äº300ä¸‡æ¡æ•°æ®)<br>4.æ•°æ®é‡å¤ä¸”åˆ†å¸ƒå¹³å‡çš„å­—æ®µ</p><h3 id="æ€§èƒ½åˆ†æ"><a href="#æ€§èƒ½åˆ†æ" class="headerlink" title="æ€§èƒ½åˆ†æ"></a>æ€§èƒ½åˆ†æ</h3><p>ä½¿ç”¨explain + SQLè¯­å¥ï¼Œå¯ä»¥å¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œæ€§èƒ½åˆ†æ<br>å…·ä½“çš„åˆ†æè¿˜åœ¨å­¦ä¹ ä¸æ•´ç†ï¼Œéœ€è¦æ˜å¤©æ›´æ–°</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQLæ·±å…¥å­¦ä¹ -01&quot;&gt;&lt;a href=&quot;#MySQLæ·±å…¥å­¦ä¹ -01&quot; class=&quot;headerlink&quot; title=&quot;MySQLæ·±å…¥å­¦ä¹ _01&quot;&gt;&lt;/a&gt;MySQLæ·±å…¥å­¦ä¹ _01&lt;/h2&gt;&lt;h3 id=&quot;å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&quot;&gt;&lt;a href=&quot;#å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&quot; class=&quot;headerlink&quot; title=&quot;å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&quot;&gt;&lt;/a&gt;å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&lt;/h3&gt;&lt;p&gt;MyISAMã€InnoDBä¸ºå¸¸ç”¨çš„ä¸¤ä¸ªMySQLæ•°æ®åº“å­˜å‚¨å¼•æ“ï¼Œå…¶åŒºåˆ«ä¸ºï¼š&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>spring_aop</title>
    <link href="http://yoursite.com/2019/05/29/spring-aop/"/>
    <id>http://yoursite.com/2019/05/29/spring-aop/</id>
    <published>2019-05-29T04:01:25.000Z</published>
    <updated>2019-05-29T04:45:07.448Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SpringAopçš„å­¦ä¹ "><a href="#SpringAopçš„å­¦ä¹ " class="headerlink" title="SpringAopçš„å­¦ä¹ "></a>SpringAopçš„å­¦ä¹ </h2><h3 id="ä»€ä¹ˆæ˜¯aop"><a href="#ä»€ä¹ˆæ˜¯aop" class="headerlink" title="ä»€ä¹ˆæ˜¯aop"></a>ä»€ä¹ˆæ˜¯aop</h3><p>aopå³æ˜¯é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´åŠ¨æ€åœ°å°†æŸæ®µç¨‹åºä»£ç åˆ‡å…¥åˆ°æŒ‡å®šä½ç½®è¿›è¡Œè¿è¡Œçš„ç¼–ç¨‹æ–¹å¼ã€‚å…¶åŸç†æ˜¯åŸºäºåŠ¨æ€ä»£ç†ã€‚</p><a id="more"></a><h3 id="aopç¼–ç¨‹æ­¥éª¤"><a href="#aopç¼–ç¨‹æ­¥éª¤" class="headerlink" title="aopç¼–ç¨‹æ­¥éª¤"></a>aopç¼–ç¨‹æ­¥éª¤</h3><h4 id="1-åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–"><a href="#1-åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–" class="headerlink" title="1.åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–"></a>1.åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–</h4><figure class="hljs highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aspects<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.3.12.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»"><a href="#2-å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»" class="headerlink" title="2.å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»"></a>2.å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»</h4><p>åœ¨æ­¤å®šä¹‰ä¸€ä¸ªé™¤æ³•çš„ä¸šåŠ¡é€»è¾‘<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MathCaculator</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">div</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j)</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"æ–¹æ³•å¼€å§‹"</span>);<br>        <span class="hljs-keyword">return</span> i/j;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="3-å®šä¹‰åˆ‡é¢ç±»"><a href="#3-å®šä¹‰åˆ‡é¢ç±»" class="headerlink" title="3.å®šä¹‰åˆ‡é¢ç±»"></a>3.å®šä¹‰åˆ‡é¢ç±»</h4><p>æ­¤åˆ‡é¢ç±»åœ¨è°ƒç”¨ä¸šåŠ¡é€»è¾‘ä¹‹å‰ï¼Œä¹‹åï¼Œè¿”å›æ­£å¸¸ï¼Œå‡ºç°å¼‚å¸¸ç­‰æƒ…å†µä¸‹è¢«æ‰§è¡Œ<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogAspect</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logStart</span><span class="hljs-params">(JoinPoint joinPoint)</span></span>&#123;<br>        Object[] args = joinPoint.getArgs();<br>        System.out.println(joinPoint.getSignature().getName()+<span class="hljs-string">"å¼€å§‹ä¹‹å‰"</span>+ Arrays.asList(args));<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logEnd</span><span class="hljs-params">(JoinPoint joinPoint)</span></span>&#123;<br>        System.out.println(joinPoint.getSignature().getName() + <span class="hljs-string">"ç»“æŸå"</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logReturn</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span></span>&#123;<br>        System.out.println(joinPoint.getSignature().getName()+<span class="hljs-string">"æ­£å¸¸è¿”å›:"</span> + result);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logException</span><span class="hljs-params">(JoinPoint joinPoint, Exception exception)</span></span>&#123;<br>        System.out.println(joinPoint.getSignature().getName() + <span class="hljs-string">"å‡ºç°å¼‚å¸¸:"</span> + exception);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>é€šçŸ¥çš„æ–¹æ³•æœ‰å‰ç½®ã€åç½®ã€è¿”å›æ­£å¸¸å€¼ã€å¼‚å¸¸ã€ç¯ç»•é€šçŸ¥ã€‚<br>å‰ç½®ï¼š@Beforeï¼Œåç½®ï¼š@Afterï¼Œ è¿”å›æ­£å¸¸ï¼š@AfterReturningï¼Œ å¼‚å¸¸ï¼š@AfterThrowingï¼Œ ç¯ç»•ï¼š@Around</p><h4 id="4-ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ"><a href="#4-ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ" class="headerlink" title="4.ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ"></a>4.ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ</h4><p>@Before(â€œpublic int cn.hdu.aop.MathCaculator.<em>(..)â€)<br>@After(â€œpublic int cn.hdu.aop.MathCaculator.</em>(..)â€)<br>â€¦..<br>å¦‚æœç›®æ ‡æ–¹æ³•ä¸ºåŒä¸€ä¸ªæ—¶ï¼Œå¯ä»¥æå–å…¬å…±åˆ‡å…¥ç‚¹<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogAspect</span> </span>&#123;<br><span class="hljs-meta">@Pointcut</span>(<span class="hljs-string">"execution(public int cn.hdu.aop.MathCaculator.*(..))"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">point</span><span class="hljs-params">()</span></span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>å¦‚æœæœ¬ç±»ä½¿ç”¨æ­¤åˆ‡ç‚¹æ—¶ï¼Œç›´æ¥ä½¿ç”¨æ–¹æ³•åï¼Œå¦‚ï¼š@Before(â€œpoint()â€)<br>å¦‚æœåˆ«çš„ç±»ä½¿ç”¨æ­¤åˆ‡ç‚¹æ—¶ï¼Œä½¿ç”¨åˆ‡ç‚¹çš„ç±»åï¼Œå¦‚ï¼š@Before(â€œcn.hdu.aop.LogAspect.point()â€)</p><h4 id="5-å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­"><a href="#5-å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­" class="headerlink" title="5.å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­"></a>5.å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­</h4><p>åœ¨é…ç½®ç±»ä¸­å°†ä¸Šè¿°çš„ç±»åŠ å…¥åˆ°å®¹å™¨<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfigOfAOP</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> MathCaculator <span class="hljs-title">mathCaculator</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MathCaculator();<br>    &#125;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> LogAspect <span class="hljs-title">logAspect</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LogAspect();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="6-éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»"><a href="#6-éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»" class="headerlink" title="6.éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»"></a>6.éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»</h4><p>åœ¨åˆ‡é¢ç±»ä¸Šä½¿ç”¨@Aspectæ³¨è§£</p><h4 id="7-åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£"><a href="#7-åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£" class="headerlink" title="7.åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£"></a>7.åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£</h4><p>@EnableAspectJAutoProxy</p><h4 id="8-æµ‹è¯•ä»£ç "><a href="#8-æµ‹è¯•ä»£ç " class="headerlink" title="8.æµ‹è¯•ä»£ç "></a>8.æµ‹è¯•ä»£ç </h4><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AOPTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfAOP.class);<br>        MathCaculator contextBean = (MathCaculator) context.getBean(<span class="hljs-string">"mathCaculator"</span>);<br>        contextBean.div(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨beanå®¹å™¨ä¸­è·å–mathCaculatorç»„ä»¶ï¼Œè°ƒç”¨ç»„ä»¶çš„div()æ–¹æ³•</p><p><img src="/2019/05/29/spring-aop/QQæˆªå›¾20190529123653.png" alt="æµ‹è¯•ç»“æœ"></p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AOPTest</span> </span>&#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfAOP.class);<br>        MathCaculator contextBean = (MathCaculator) context.getBean(<span class="hljs-string">"mathCaculator"</span>);<br>        contextBean.div(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå‡ºç°å¼‚å¸¸ï¼Œå…¶æµ‹è¯•ç»“æœä¸ºï¼š</p><p><img src="/2019/05/29/spring-aop/QQæˆªå›¾20190529123945.png" alt="æµ‹è¯•ç»“æœ"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SpringAopçš„å­¦ä¹ &quot;&gt;&lt;a href=&quot;#SpringAopçš„å­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;SpringAopçš„å­¦ä¹ &quot;&gt;&lt;/a&gt;SpringAopçš„å­¦ä¹ &lt;/h2&gt;&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯aop&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯aop&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯aop&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯aop&lt;/h3&gt;&lt;p&gt;aopå³æ˜¯é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´åŠ¨æ€åœ°å°†æŸæ®µç¨‹åºä»£ç åˆ‡å…¥åˆ°æŒ‡å®šä½ç½®è¿›è¡Œè¿è¡Œçš„ç¼–ç¨‹æ–¹å¼ã€‚å…¶åŸç†æ˜¯åŸºäºåŠ¨æ€ä»£ç†ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…</title>
    <link href="http://yoursite.com/2019/05/28/spring-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/"/>
    <id>http://yoursite.com/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/</id>
    <published>2019-05-28T07:26:07.000Z</published>
    <updated>2019-05-28T09:08:05.993Z</updated>
    
    <content type="html"><![CDATA[<h2 id="spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…"><a href="#spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…" class="headerlink" title="spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…"></a>spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…</h2><h3 id="1-å±æ€§èµ‹å€¼"><a href="#1-å±æ€§èµ‹å€¼" class="headerlink" title="1.å±æ€§èµ‹å€¼"></a>1.å±æ€§èµ‹å€¼</h3><p>ä½¿ç”¨@valueæ³¨è§£ä¾¿å¯ä»¥ä½¿å®¹å™¨ä¸­çš„å±æ€§è¿›è¡Œèµ‹å€¼</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"#&#123;22-2&#125;"</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"zhangsan"</span>)<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"$&#123;person.nickNmae&#125;"</span>)<br>    <span class="hljs-keyword">private</span> String nickNmae;<br>    <span class="hljs-comment">//get()ã€set()æ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure><a id="more"></a><p>1.@Value(â€œzhangsanâ€)ï¼Œåœ¨valueä¸­ç›´æ¥å†™å…¥å±æ€§ï¼ŒåŸºæœ¬æ•°å€¼éƒ½å¯ä»¥ã€‚<br>2.@Value(â€œ#{22-2}â€)ï¼ŒSPELè¡¨è¾¾å¼ï¼Œåœ¨è¡¨è¾¾å¼ä¸­å¯ä»¥è¿›è¡Œè¿ç®—ã€‚<br>3.@Value(â€œ${person.nickNmae}â€)ï¼Œè·å–åˆ°å¤–éƒ¨é…ç½®æ–‡ä»¶ä¸­çš„å€¼</p><ul><li><p>é€šè¿‡å¤–éƒ¨é…ç½®æ–‡ä»¶è·å–å±æ€§å€¼æ—¶ï¼Œé¦–å…ˆéœ€è¦ç¼–å†™ä¸€ä¸ªpropertiesæ–‡ä»¶</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties">person.nickNmae=xiaolisi<br></code></pre></td></tr></table></figure></li><li><p>ä¹‹åå†åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨@PropertySourceå±æ€§ï¼Œå°†å¤–éƒ¨çš„é…ç½®æ–‡ä»¶æ‰«æåˆ°ã€‚</p></li><li>æœ€åï¼Œä¾¿å¯ä»¥ä½¿ç”¨${}è·å–é…ç½®æ–‡ä»¶çš„å€¼ã€‚</li></ul><p>æµ‹è¯•ä»£ç å¦‚ä¸‹</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PropertyTest</span> </span>&#123;<br>    AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfproperty.class);<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        showBeanNames(context);<br>        Person person = (Person) context.getBean(<span class="hljs-string">"person"</span>);<br>        System.out.println(person);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showBeanNames</span><span class="hljs-params">(ApplicationContext context)</span></span>&#123;<br>        String[] names = context.getBeanDefinitionNames();<br>        <span class="hljs-keyword">for</span> (String name : names) &#123;<br>            System.out.println(name);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528154531.png" alt="æµ‹è¯•ç»“æœ"></p><p>ç»“æœå¯ä»¥çœ‹åˆ°age=20,name=â€™zhangsanâ€™,nickNmae=â€™xiaolisiâ€™ä¸æ³¨å…¥çš„å±æ€§å€¼ç›¸ç¬¦ã€‚</p><h3 id="2-è‡ªåŠ¨è£…é…"><a href="#2-è‡ªåŠ¨è£…é…" class="headerlink" title="2.è‡ªåŠ¨è£…é…"></a>2.è‡ªåŠ¨è£…é…</h3><h4 id="2-1-Autowiredæ³¨è§£"><a href="#2-1-Autowiredæ³¨è§£" class="headerlink" title="2.1 @Autowiredæ³¨è§£"></a>2.1 @Autowiredæ³¨è§£</h4><p>åœ¨ä¸€èˆ¬çš„webé¡¹ç›®ï¼Œå­˜åœ¨controllerå±‚ã€serviceå±‚ã€daoå±‚ï¼Œåœ¨ä½¿ç”¨serviceå±‚æ—¶éœ€è¦è°ƒç”¨daoå±‚çš„æ–¹æ³•ï¼Œä½¿ç”¨controllerå±‚æ—¶éœ€è¦è°ƒç”¨serviceå±‚çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨å½“å‰çš„ç±»ä¸­ä¸åˆ›å»ºè°ƒç”¨ç±»çš„å®ä¾‹ã€‚è¿™æ—¶@Autowiredæ³¨è§£å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookService</span> </span>&#123;<br>     <span class="hljs-meta">@Autowired</span><br>     BookDao bookDao2;<br>     <span class="hljs-meta">@Override</span><br>     <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-string">"BookService&#123;"</span> +<br>                 <span class="hljs-string">"bookDao="</span> + bookDao2 +<br>                 <span class="hljs-string">'&#125;'</span>;<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸ºï¼Œåœ¨BookServiceç±»ä¸­éœ€è¦æ³¨å…¥BookDaoï¼ŒåŠ ä¸Š@Autowiredæ³¨è§£ä¾¿å¯ä»¥å°†BookDaoå±æ€§åŠ è½½ã€‚å°†ä¸Šè¿°ä»£ç è¿›è¡Œæµ‹è¯•</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutowiredTest</span> </span>&#123;<br>    AnnotationConfigApplicationContext context = <br>    <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfAutowired.class);<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        BookService bookService = context.getBean(BookService.class);<br>        System.out.println(bookService);<br>        BookDao bookDao = context.getBean(BookDao.class);<br>        System.out.println(bookDao);  <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528160946.png" alt="æµ‹è¯•ç»“æœ"></p><p>ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨BookServiceä¸­æ³¨å…¥çš„BookDaoä¸beanå®¹å™¨ä¸­çš„BookDaoæ˜¯åŒä¸€ä¸ªã€‚<br>@Autowiredæ³¨è§£åœ¨æ³¨å…¥å®¹å™¨ä¸­çš„å±æ€§æ—¶ï¼Œé¦–å…ˆä¼šæŒ‰ç…§ç±»å‹å»å®¹å™¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ã€‚å‡å¦‚@Autowiredæ³¨è§£åœ¨æ³¨å…¥å®¹å™¨ä¸­çš„å±æ€§æ—¶ï¼Œé¦–å…ˆä¼šæŒ‰ç…§ç±»å‹å»å®¹å™¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ã€‚å‡å¦‚@Autowiredæ ‡æ³¨åœ¨BookDao bookDao2ä¸Šï¼Œé¦–å…ˆå®ƒä¼šå»æ‰¾å®¹å™¨ä¸­ç±»å‹ä¸ºBookDaoçš„ç»„ä»¶ï¼Œå¦‚æœå®¹å™¨ä¸­æœ‰å¤šä¸ªBookDaoçš„ç»„ä»¶ï¼Œåˆ™å†æ ¹æ®å±æ€§åä½œä¸ºç»„ä»¶idå»å®¹å™¨ä¸­æ‰¾ï¼Œå¦‚æ­¤æ—¶çš„å±æ€§åä¸ºbookDao2ï¼Œåˆ™å»å®¹å™¨ä¸­å¯»æ‰¾idåä¸ºbookDao2çš„ç»„ä»¶ã€‚</p><p>é¦–å…ˆï¼Œå®¹å™¨ä¸­æœ‰ä¸€ä¸ªbookDaoï¼Œå°†å…¶æ ‡è®°ä¸ºâ€œ1â€<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookDao</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String tag = <span class="hljs-string">"1"</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getTag</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> tag;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTag</span><span class="hljs-params">(String tag)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.tag = tag;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"BookDao&#123;"</span> +<br>                <span class="hljs-string">"tag='"</span> + tag + <span class="hljs-string">'\''</span> +<br>                <span class="hljs-string">'&#125;'</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>å†åœ¨é…ç½®ç±»ä¸­æ³¨å…¥ä¸€ä¸ªBookDaoçš„ç»„ä»¶ï¼Œå°†å…¶å‘½åä¸ºbookDao2ï¼Œå¹¶æ ‡è®°ä¸ºâ€œ2â€</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span>(<span class="hljs-string">"bookDao2"</span>)<br><span class="hljs-function"><span class="hljs-keyword">public</span> BookDao <span class="hljs-title">bookDao</span><span class="hljs-params">()</span></span>&#123;<br>    BookDao bookDao = <span class="hljs-keyword">new</span> BookDao();<br>    bookDao.setTag(<span class="hljs-string">"2"</span>);<br>    <span class="hljs-keyword">return</span> bookDao;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç è‡ªåŠ¨è£…é…çš„BookDaoå‘½åä¸ºbookDao2;</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528162335.png" alt="æµ‹è¯•ç»“æœ"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒBookServiceè‡ªåŠ¨è£…é…çš„BookDaoä¸ºbookDao2ã€‚</p><p>é™¤äº†æŒ‰ç…§idï¼Œspringä¹Ÿæœ‰@Qualifieræ³¨è§£ï¼ŒæŒ‡å®šéœ€è¦è£…é…çš„ç»„ä»¶çš„idã€‚@Qualifier(â€œbookDaoâ€)ï¼Œè¡¨æ˜éœ€è¦è£…é…idä¸ºbookDaoçš„ç»„ä»¶ã€‚</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528162727.png" alt="æµ‹è¯•ç»“æœ"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒBookServiceè‡ªåŠ¨è£…é…çš„BookDaoä¸ºbookDaoï¼Œå› ä¸ºå…¶tagçš„å±æ€§ä¸ºâ€œ1â€ã€‚</p><p>springçš„é»˜è®¤è§„å®šè‡ªåŠ¨è£…é…çš„ç»„ä»¶ä¸€å®šè¦å°†å±æ€§èµ‹å€¼å¥½ï¼Œæ²¡æœ‰å°±æŠ¥é”™ã€‚å°†@Qualifieré‡Œçš„å±æ€§æ”¹ä¸º@Qualifier(â€œbookDao3â€)ï¼Œåœ¨æ²¡æœ‰bookDao3çš„æƒ…å†µä¸‹ä¼šæŠ¥é”™ã€‚</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528163304.png" alt="æŠ¥é”™ä¿¡æ¯"></p><p>ä»æŠ¥é”™å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯å› ä¸ºæ‰¾ä¸åˆ°bookDao3è€Œå‡ºé”™</p><p>è¿™æ˜¯å› ä¸º@Autowiredä¸­æœ‰ä¸€ä¸ªrequiredå±æ€§ï¼Œå…¶å±æ€§é»˜è®¤å€¼ä¸ºtrueï¼Œå³è‡ªåŠ¨è£…é…çš„å€¼å¿…é¡»è¦èµ‹å€¼å¥½ï¼Œå½“å°†å…¶æ”¹ä¸ºfalseæ—¶ï¼Œæ²¡æœ‰èµ‹å€¼ä¹Ÿä¸æŠ¥é”™ï¼Œ    @Autowired(required = false)ã€‚</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528163600.png" alt="æµ‹è¯•ç»“æœ"></p><p>è‡ªåŠ¨è£…é…è¿˜æœ‰ä¸€ä¸ª@Primaryæ³¨è§£ï¼Œå³åœ¨è‡ªåŠ¨è£…é…æ—¶ä½¿ç”¨æœ‰@Primaryæ³¨è§£çš„Beanï¼Œä½†æ˜¯ä½¿ç”¨@Qualifieråï¼Œä¼šä½¿ç”¨@QualifieræŒ‡å®šidçš„beanã€‚</p><h4 id="2-2-Resourceæ³¨è§£ï¼Œ-Injectæ³¨è§£"><a href="#2-2-Resourceæ³¨è§£ï¼Œ-Injectæ³¨è§£" class="headerlink" title="2.2 @Resourceæ³¨è§£ï¼Œ@Injectæ³¨è§£"></a>2.2 @Resourceæ³¨è§£ï¼Œ@Injectæ³¨è§£</h4><p>@Resourceå’Œ@Injectæ³¨è§£æ˜¯Javaè§„èŒƒçš„æ³¨è§£ï¼Œä¸@Autowiredä¸€æ ·å®ç°è‡ªåŠ¨è£…é…ã€‚</p><ul><li>@Resourceæ³¨è§£åªæœ‰ä¸€ä¸ªnameå±æ€§ï¼ŒæŒ‡å®šè·å–çš„ç»„ä»¶çš„idï¼Œé™¤æ­¤ä¹‹å¤–ä¸æ”¯æŒå…¶ä»–çš„åŠŸèƒ½</li><li>@Injectæ³¨è§£éœ€è¦åœ¨mavenä¸­å¯¼å…¥ç›¸å…³çš„ä¾èµ–ï¼Œé™¤äº†æ²¡æœ‰requiredçš„å±æ€§ï¼Œå…¶ä½™éƒ½å’Œ@Autowiredä¸€æ ·ä½¿ç”¨ã€‚</li></ul><h4 id="2-3-Autowiredæ ‡æ³¨ä½ç½®"><a href="#2-3-Autowiredæ ‡æ³¨ä½ç½®" class="headerlink" title="2.3 @Autowiredæ ‡æ³¨ä½ç½®"></a>2.3 @Autowiredæ ‡æ³¨ä½ç½®</h4><ul><li>å±æ€§ä¸Šå°±å¦‚ä¸Šæ‰€è¿°</li><li>set***()æ–¹æ³•ä¸Š</li><li>æ ‡åœ¨æœ‰å‚æ„é€ å™¨ä¸Š</li><li>æ ‡åœ¨å‚æ•°ä½ç½®ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨æ—¶ï¼Œ@Autowiredæ³¨è§£å¯ä»¥çœç•¥ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œè‡ªåŠ¨è£…é…</li><li>ä½¿ç”¨@Beanæ³¨è§£åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ–¹æ³•çš„å‚æ•°ä»å®¹å™¨ä¸­è·å¾—<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Color <span class="hljs-title">color</span><span class="hljs-params">(Car car)</span></span>&#123;<br>        Color color = <span class="hljs-keyword">new</span> Color();<br>        color.setCar(car);<br>        <span class="hljs-keyword">return</span> color;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-4-è‡ªå®šä¹‰ç»„ä»¶"><a href="#2-4-è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="2.4 è‡ªå®šä¹‰ç»„ä»¶"></a>2.4 è‡ªå®šä¹‰ç»„ä»¶</h4><p>springå®¹å™¨çš„åº•å±‚ç»„ä»¶éƒ½éœ€è¦å®ç°Awareæ¥å£ï¼Œè¿™æ˜¯ä¸€ä¸ªæ€»æ¥å£ï¼Œå…¶ä¸­è¿˜æœ‰å¾ˆå¤šå­æ¥å£ï¼Œå½“å®ç°å­æ¥å£ä¸”é‡å†™å…¶æ–¹æ³•ï¼Œä¾¿å¯ä»¥è‡ªå®šä¹‰ç»„ä»¶ã€‚<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Red</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ApplicationContextAware</span>, <span class="hljs-title">BeanNameAware</span>, <span class="hljs-title">EmbeddedValueResolverAware</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setApplicationContext</span><span class="hljs-params">(ApplicationContext applicationContext)</span> <span class="hljs-keyword">throws</span> BeansException </span>&#123;<br>        System.out.println(<span class="hljs-string">"Ioc:"</span>+applicationContext);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBeanName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">"Name:"</span>+name);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setEmbeddedValueResolver</span><span class="hljs-params">(StringValueResolver resolver)</span> </span>&#123;<br>        String value = resolver.resolveStringValue(<span class="hljs-string">"$&#123;os.name&#125;"</span>+ <span class="hljs-string">"....."</span> + <span class="hljs-string">"#&#123;10*2&#125;"</span>);<br>        System.out.println(value);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>ä¸Šè¿°ä»£ç ä¸­ApplicationContextAwareå¯ä»¥å®ç°Iocå®¹å™¨çš„åˆ›å»ºï¼ŒBeanNameAwareæ¥å£å¯ä»¥å¾—åˆ°Beançš„nameï¼ŒEmbeddedValueResolverAwareæ¥å£å¯ä»¥è§£æç›¸åº”çš„è¡¨è¾¾å¼ï¼Œå¦‚SPLEè¡¨è¾¾å¼ã€‚</p><h4 id="2-5-Profileç¯å¢ƒæ­å»º"><a href="#2-5-Profileç¯å¢ƒæ­å»º" class="headerlink" title="2.5 @Profileç¯å¢ƒæ­å»º"></a>2.5 @Profileç¯å¢ƒæ­å»º</h4><p>springå¯ä»¥æ ¹æ®å½“å‰çš„ç¯å¢ƒï¼ŒåŠ¨æ€æ¿€æ´»ä¸åˆ‡æ¢ç»„ä»¶ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨@Profileï¼Œæ­¤æ³¨è§£çš„é»˜è®¤å€¼æ—¶defaultç¯å¢ƒã€‚</p><p>ç¯å¢ƒçš„æ”¹å˜</p><ul><li>å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼Œå°†å…¶æ”¹ä¸º-Dspring.profiles.active=***ï¼Œå…¶ä¸­ç­‰å¼åé¢çš„å€¼ä¸ºå…·ä½“çš„ç¯å¢ƒã€‚</li><li>ä¹Ÿå¯ä»¥åœ¨ä¸è¯¥å˜å‘½ä»¤è¡Œçš„å‰æä¸‹ä½¿ç”¨AnnotationConfigApplicationContextçš„æ— å‚æ„é€ å™¨ï¼Œåœ¨æ³¨å†Œé…ç½®ç±»ä¹‹å‰ï¼Œæ”¹å˜å…¶ç¯å¢ƒï¼Œä½¿ç”¨.getEnvironment().setActiveProfiles()æ–¹æ³•ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&quot;&gt;&lt;a href=&quot;#spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&quot; class=&quot;headerlink&quot; title=&quot;spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&quot;&gt;&lt;/a&gt;spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&lt;/h2&gt;&lt;h3 id=&quot;1-å±æ€§èµ‹å€¼&quot;&gt;&lt;a href=&quot;#1-å±æ€§èµ‹å€¼&quot; class=&quot;headerlink&quot; title=&quot;1.å±æ€§èµ‹å€¼&quot;&gt;&lt;/a&gt;1.å±æ€§èµ‹å€¼&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨@valueæ³¨è§£ä¾¿å¯ä»¥ä½¿å®¹å™¨ä¸­çš„å±æ€§è¿›è¡Œèµ‹å€¼&lt;/p&gt;
&lt;figure class=&quot;hljs highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Person&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;br&gt;    &lt;span class=&quot;hljs-meta&quot;&gt;@Value&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;#&amp;#123;22-2&amp;#125;&quot;&lt;/span&gt;)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; age;&lt;br&gt;    &lt;span class=&quot;hljs-meta&quot;&gt;@Value&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;zhangsan&quot;&lt;/span&gt;)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String name;&lt;br&gt;    &lt;span class=&quot;hljs-meta&quot;&gt;@Value&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;$&amp;#123;person.nickNmae&amp;#125;&quot;&lt;/span&gt;)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String nickNmae;&lt;br&gt;    &lt;span class=&quot;hljs-comment&quot;&gt;//get()ã€set()æ–¹æ³•&lt;/span&gt;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>spring_Beançš„ç”Ÿå‘½å‘¨æœŸ</title>
    <link href="http://yoursite.com/2019/05/26/spring-Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    <id>http://yoursite.com/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/</id>
    <published>2019-05-26T07:18:39.000Z</published>
    <updated>2019-05-28T07:53:00.839Z</updated>
    
    <content type="html"><![CDATA[<h2 id="springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£"><a href="#springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£" class="headerlink" title="springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£"></a>springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£</h2><p>åˆè¯†Beançš„ç”Ÿå‘½å‘¨æœŸï¼šBeanå®¹å™¨çš„åˆ›å»ºâ€”&gt;åˆå§‹åŒ–Beanâ€”-&gt;Beanå®¹å™¨çš„é”€æ¯</p><ul><li>åœ¨xmlä¸­å®šä¹‰init-methodå’Œdestroy-methodå±æ€§ï¼Œå°±å¯ä»¥å®šä¹‰åˆå§‹åŒ–ä¸é”€æ¯æ–¹æ³•</li><li>åœ¨æ³¨è§£æ¨¡å¼ä¸‹æœ‰ä¸‰ç§æ–¹æ³•</li></ul><a id="more"></a><p>####1.ç¬¬ä¸€ç§<br>åœ¨@Beanä¸­æŒ‡å®šinitMethodä¸destroyMethodå±æ€§<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ComponentScan</span>(<span class="hljs-string">"cn.hdu.bean"</span>)<br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfigOfLife</span> </span>&#123;<br><span class="hljs-meta">@Bean</span>(value = <span class="hljs-string">"car"</span>, initMethod = <span class="hljs-string">"init"</span>, destroyMethod = <span class="hljs-string">"destroy"</span>)<br><span class="hljs-function"><span class="hljs-keyword">public</span> Car <span class="hljs-title">car</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Car();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>åœ¨å¯¹åº”çš„Carç±»ä¸­ç¼–å†™ç›¸åº”çš„initæ–¹æ³•ä¸destroyæ–¹æ³•<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span><br></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Car</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">"car..æ„é€ å™¨å¯åŠ¨"</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"caråˆå§‹åŒ–....."</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"caré”€æ¯....."</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>æµ‹è¯•ä»£ç å¦‚ä¸‹<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LifeTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfLife.class);<br>        System.out.println(<span class="hljs-string">"å®¹å™¨åˆ›å»º"</span>);<br>        context.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>é¦–å…ˆnewä¸€ä¸ªå®¹å™¨ï¼Œæ‰“å°ï¼Œå…³é—­å®¹å™¨<br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526153517.png" alt="æµ‹è¯•ä»£ç ç»“æœ"><br>ä»ç»“æœçœ‹ï¼Œé¦–å…ˆåˆ›å»ºå¥½çš„å®¹å™¨ä¼šæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œæ¥ç€åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åœ¨Beançš„åˆ›å»ºä¸å±æ€§èµ‹å€¼ä¹‹åï¼Œå†å®ç°æµ‹è¯•ä»£ç ä¸­çš„è¾“å‡ºè¯­å¥ï¼Œæœ€åå®¹å™¨å…³é—­åBeanè¢«é”€æ¯<br>ä½†æ˜¯ï¼Œå½“åˆ›å»ºçš„Beanä¸ºå¤šä¾‹æ¨¡å¼ï¼Œåˆ™æœ‰å·®å¼‚ï¼Œå†é…ç½®ç±»çš„@Beanæ³¨è§£ä¸ŠåŠ å…¥@Scope(â€œprototypeâ€)æ³¨è§£ï¼Œå…¶ç»“æœä¸º<br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526153959.png" alt="å¤šä¾‹ç»“æœ"><br>åœ¨å¤šä¾‹æ¨¡å¼ä¸‹åˆ›å»ºå®¹å™¨æ—¶ï¼Œä¸æ‰§è¡Œå¯¹beançš„æ„é€ ä¸åˆå§‹åŒ–ï¼Œåœ¨å…³é—­å®¹å™¨çš„æ—¶å€™éƒ¨é”€æ¯Beanï¼Œå¤šä¾‹æ¨¡å¼ä¸‹åªæœ‰åœ¨è·å–åˆ°Beançš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œæ„é€ å’Œåˆå§‹åŒ–ï¼Œä½†æ˜¯ä¸ä¼šé”€æ¯ã€‚<br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526154227.png" alt="å¤šä¾‹è·å–Beançš„ç»“æœ"></p><p>####2.ç¬¬äºŒç§<br>é€šè¿‡å®ç°InitializingBeanæ¥å£å®Œæˆåˆå§‹åŒ–,å®ç°DisposableBeanæ¥å£å®ç°é”€æ¯<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cat</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InitializingBean</span>,<span class="hljs-title">DisposableBean</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Cat</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"cat..æ„é€ å™¨å¯åŠ¨"</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        System.out.println(<span class="hljs-string">"caté”€æ¯....."</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterPropertiesSet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        System.out.println(<span class="hljs-string">"catåˆå§‹åŒ–....."</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>####3.ç¬¬ä¸‰ç§<br>ç”±JSR250è§„èŒƒï¼Œåœ¨æ–¹æ³•ä½ç½®æ³¨æ˜@PostConstructä¸@PreDestroyæ³¨è§£ä¹Ÿå¯ä»¥å®ç°åˆå§‹åŒ–ä¸é”€æ¯<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Dog</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">"Dogæ„é€ å‡½æ•°....."</span>);<br>    &#125;<br>    <span class="hljs-meta">@PostConstruct</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"Dogåˆå§‹åŒ–......"</span>);<br>    &#125;<br>    <span class="hljs-meta">@PreDestroy</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"Dogé”€æ¯......."</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><hr><p>Beançš„ç”Ÿå‘½å‘¨æœŸåœ¨åˆå§‹åŒ–å‰åè¿˜å¯ä»¥æ‰§è¡Œè‡ªå®šä¹‰çš„é€»è¾‘ï¼Œéœ€è¦å®ç°BeanPostProcessoræ¥å£ï¼ŒBeanPostProcessoræ¥å£éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼ŒpostProcessBeforeInitializationæ–¹æ³•ä¸postProcessAfterInitializationæ–¹æ³•ã€‚<br>postProcessBeforeInitializationæ–¹æ³•åœ¨Beanåˆå§‹åŒ–å‰æ‰§è¡Œï¼ŒpostProcessAfterInitializationæ–¹æ³•åœ¨Beanåˆå§‹åŒ–åæ‰§è¡Œã€‚<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBeanPostProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanPostProcessor</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException </span>&#123;<br>        System.out.println(<span class="hljs-string">"åˆå§‹åŒ–ä¹‹å‰"</span> + beanName +<span class="hljs-string">"........."</span>+ bean);<br>        <span class="hljs-keyword">return</span> bean;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">postProcessAfterInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException </span>&#123;<br>        System.out.println(<span class="hljs-string">"åˆå§‹åŒ–ä¹‹å"</span> + beanName +<span class="hljs-string">"........."</span>+ bean);<br>        <span class="hljs-keyword">return</span> bean;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526155632.png" alt="BeanPostProcessorä»£ç ç»“æœ"></p><p><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526161012.png" alt="é€šè¿‡å¯¹ä»£ç è¿›è¡Œdebugï¼Œå¯ä»¥å‘ç°å…¶initializeBeanæ–¹æ³•"><br>åœ¨initializeBeanæ–¹æ³•ä¹‹å‰æœ‰populateBean()æ–¹æ³•ï¼ŒæŸ¥çœ‹æºç ä¼šå‘ç°ï¼Œæ­¤æ–¹æ³•ä¸ºBeanèµ‹äºˆå±æ€§<br>è¿›å…¥initializeBeanæ–¹æ³•æºç <br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526161347.png" alt="invokeInitMethodsæ–¹æ³•å‰ä¼šè°ƒç”¨applyBeanPostProcessorsBeforeInitializationæ–¹æ³•"></p><p><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526161520.png" alt="invokeInitMethodsæ–¹æ³•åä¼šè°ƒç”¨applyBeanPostProcessorsAfterInitializationæ–¹æ³•"></p><p>Beançš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸä¸ºï¼šå®¹å™¨çš„åˆ›å»ºâ€”&gt;å®ç°æ„é€ å‡½æ•°â€”&gt;åˆå§‹åŒ–å‰çš„å¤„ç†â€”&gt;Beanåˆå§‹åŒ–â€”&gt;åˆå§‹åŒ–åçš„å¤„ç†â€”&gt;Beançš„é”€æ¯</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&quot;&gt;&lt;a href=&quot;#springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&quot; class=&quot;headerlink&quot; title=&quot;springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&quot;&gt;&lt;/a&gt;springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&lt;/h2&gt;&lt;p&gt;åˆè¯†Beançš„ç”Ÿå‘½å‘¨æœŸï¼šBeanå®¹å™¨çš„åˆ›å»ºâ€”&amp;gt;åˆå§‹åŒ–Beanâ€”-&amp;gt;Beanå®¹å™¨çš„é”€æ¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨xmlä¸­å®šä¹‰init-methodå’Œdestroy-methodå±æ€§ï¼Œå°±å¯ä»¥å®šä¹‰åˆå§‹åŒ–ä¸é”€æ¯æ–¹æ³•&lt;/li&gt;
&lt;li&gt;åœ¨æ³¨è§£æ¨¡å¼ä¸‹æœ‰ä¸‰ç§æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>springç»„ä»¶æ³¨å†Œ</title>
    <link href="http://yoursite.com/2019/05/25/spring%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C/"/>
    <id>http://yoursite.com/2019/05/25/springç»„ä»¶æ³¨å†Œ/</id>
    <published>2019-05-25T13:29:39.000Z</published>
    <updated>2019-05-29T05:37:31.212Z</updated>
    
    <content type="html"><![CDATA[<h4 id="springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI"><a href="#springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI" class="headerlink" title="springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI"></a>springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI</h4><p>1.åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ä¼šåˆ›å»ºä¸€ä¸ªxmlæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªbeanï¼Œå¦‚ä¸‹ï¼š<br><figure class="hljs highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"people"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cn.hdu.bean.Person"</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"lisi"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"22"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></p><a id="more"></a><p>ä½¿ç”¨xmlä½¿å¾—å¼€å‘å¾ˆç¹çã€‚å› æ­¤ï¼Œè®¸å¤šäººä¼šç”¨æ³¨è§£å¼€å‘ä»£æ›¿ä¼ ç»Ÿçš„xmlå¼€å‘ã€‚é‚£ä¹ˆåœ¨æ³¨è§£å¼€å‘æ—¶ï¼Œéœ€è¦å®Œæˆä¸Šè¿°çš„beanæ³¨å…¥éœ€è¦æ€ä¹ˆåšå‘¢?</p><ul><li>éœ€è¦å†™é…ç½®ç±»ï¼Œåœ¨ä¸€ä¸ªclassæ–‡ä»¶ä¸Šæ ‡æ³¨@configration</li><li>åœ¨ç±»ä¸­å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•è¿”å›å€¼ä¸ºæ³¨å…¥beançš„ç±»å‹</li><li>æ–¹æ³•ä¸Šå¯ä»¥åŠ @bean(value = â€œ***â€)æ³¨è§£,valueçš„å±æ€§æ˜¯æ­¤beançš„nameï¼Œç±»æ¯”ä¸ºxmlä¸­çš„idå±æ€§<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span>(<span class="hljs-string">"person"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">person</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(<span class="hljs-number">22</span>, <span class="hljs-string">"lisi"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>æœ€åå°†æµ‹è¯•è¯æ˜ï¼Œxmlä¸æ³¨è§£å¾—åˆ°çš„beanä¸€æ ·<br>xmlæµ‹è¯•ä»£ç ï¼š<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IOCTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test0</span><span class="hljs-params">()</span></span>&#123;<br>        ClassPathXmlApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"src/main/resource/bean.xml"</span>);<br>        Person person = (Person) context.getBean(<span class="hljs-string">"person"</span>);<br>        System.out.println(person);<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190525213128.png" alt="xmlæµ‹è¯•ç»“æœ"><br>æ³¨è§£æµ‹è¯•ä»£ç ï¼š<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IOCTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>            AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MainConfig.class);<br>            Object person = context.getBean(<span class="hljs-string">"person"</span>);<br>            System.out.println(person);<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>AnnotationConfigApplicationContextç±»å¯ä»¥å¾—åˆ°ç”±@Configurationæ³¨è§£çš„ç±»ã€‚<br><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190525214624.png" alt="æ³¨è§£æµ‹è¯•ç»“æœ"></p><p>2.åŒ…æ‰«æ<br>åœ¨ä¼ ç»Ÿçš„xmlå¼€å‘æ¨¡å¼ä¸­<br><figure class="hljs highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"cn.hdu"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></table></figure></p><ul><li>ä½¿ç”¨æ³¨è§£å¯ä»¥åœ¨configç±»ä¸ŠåŠ @ComponentScan(value=â€cn.hduâ€),valueä¸­çš„å†…å®¹ä¸ºéœ€è¦æ‰«æçš„åŒ…ï¼Œåœ¨è¿™å†™åŒ…ä¸Šï¼Œåªè¦å­˜åœ¨classæ–‡ä»¶ä¸Šæœ‰@Controllerã€@@Repositoryã€@Serviceã€@Componentæ³¨è§£ï¼Œä¾¿å¯ä»¥ä½¿ç”¨æ­¤æ‰«æåˆ°ã€‚</li><li>åœ¨ä¸€èˆ¬çš„é¡¹ç›®ä¸­ï¼Œå­˜åœ¨controllerå±‚ï¼Œserviceå±‚daoå±‚ï¼Œåœ¨è¿™ä¸‰ä¸ªåŒ…çš„ç±»ä¸­åŠ ä¸Š@@Repositoryã€@Serviceã€@Controlleræ³¨è§£<br><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190526124559.png" alt="å„ä¸ªç±»çš„åˆ†å¸ƒ"><br>é…ç½®ç±»çš„ä»£ç <figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ComponentScan</span>(value = <span class="hljs-string">"cn.hdu"</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span>(<span class="hljs-string">"person"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">person</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(<span class="hljs-number">17</span>, <span class="hljs-string">"lisi"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>æµ‹è¯•ç±»çš„ä»£ç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IOCTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MainConfig.class);<br>        String[] names = context.getBeanDefinitionNames();<br>        <span class="hljs-keyword">for</span> (String name : names) &#123;<br>            System.out.println(name);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>getBeanDefinitionNames()æ–¹æ³•å¯ä»¥å¾—åˆ°å·²ç»åˆ›å»ºçš„beançš„åå­—ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚<br><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190526125117.png" alt="åŒ…æ‰«é¢æ³¨è§£æµ‹è¯•ç»“æœ"><br>é™¤å´springè‡ªå·±éœ€è¦çš„å®¹å™¨ï¼Œè¿˜æ‰«æåˆ°äº†mainConfigã€bookControllerã€bookDaoã€bookServiceã€personï¼Œå…¶ä¸­æ‰«é¢åˆ°mainConfigè¿™ä¸ªé…ç½®ç±»æ˜¯å› ä¸º@Configurationæ³¨è§£ï¼Œ@Configurationæ³¨è§£çš„æºç ä¸º<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target</span>(ElementType.TYPE)<br><span class="hljs-meta">@Retention</span>(RetentionPolicy.RUNTIME)<br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Configuration &#123;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>@Configurationæ³¨è§£ä¸Šæœ‰@Componentæ³¨è§£ï¼Œè€Œ@ComponentScanæ³¨è§£æ˜¯å¯ä»¥æ‰«æåˆ°æ³¨æœ‰@Componentæ³¨è§£çš„ç±»<br>å¾—åˆ°personæ˜¯å› ä¸ºæœ‰@Beanæ³¨è§£ã€‚</p><ul><li>@ComponentScanæ³¨è§£é™¤äº†æœ‰valueå±æ€§ï¼Œè¿˜æœ‰excludeFiltersä¸includeFiltersï¼Œå½“è®¾ç½®äº†åé¢çš„å±æ€§ï¼Œæ­¤æ³¨è§£æ‰«æåˆ°çš„åŒ…å¯ä»¥ç”±è‡ªå·±å®šåˆ¶<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Filter[] excludeFilters() <span class="hljs-keyword">default</span> &#123;&#125;;<br>Filter[] includeFilters() <span class="hljs-keyword">default</span> &#123;&#125;;<br></code></pre></td></tr></table></figure></li></ul><p>è¿™ä¸¤ä¸ªå±æ€§éƒ½éœ€è¦Filteræ•°ç»„ï¼ŒæŸ¥çœ‹Filteræºç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@interface</span> Filter &#123;<br><br><span class="hljs-comment">/**<br> * The type of filter to use.<br> * &lt;p&gt;Default is &#123;<span class="hljs-doctag">@link</span> FilterType#ANNOTATION&#125;.<br> * <span class="hljs-doctag">@see</span> #classes<br> * <span class="hljs-doctag">@see</span> #pattern<br> */</span><br><span class="hljs-function">FilterType <span class="hljs-title">type</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> FilterType.ANNOTATION</span>;<br><span class="hljs-comment">/**<br> * Alias for &#123;<span class="hljs-doctag">@link</span> #classes&#125;.<br> * <span class="hljs-doctag">@see</span> #classes<br> */</span><br><span class="hljs-meta">@AliasFor</span>(<span class="hljs-string">"classes"</span>)<br>Class&lt;?&gt;[] value() <span class="hljs-keyword">default</span> &#123;&#125;;<br></code></pre></td></tr></table></figure></p><p>é…ç½®Filterï¼Œéœ€è¦FilterTypeä¸Class&lt;?&gt;[]ï¼ŒClass&lt;?&gt;[]ä¸ºéœ€è¦è¿‡æ»¤çš„ç±»çš„.classå±æ€§ï¼ŒæŸ¥çœ‹FilterTypeæºç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> FilterType &#123;<br><br><span class="hljs-comment">/**<br> * Filter candidates marked with a given annotation.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.AnnotationTypeFilter<br> */</span><br>ANNOTATION,<br><span class="hljs-comment">/**<br> * Filter candidates assignable to a given type.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.AssignableTypeFilter<br> */</span><br>ASSIGNABLE_TYPE,<br><span class="hljs-comment">/**<br> * Filter candidates matching a given AspectJ type pattern expression.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.AspectJTypeFilter<br> */</span><br>ASPECTJ,<br><span class="hljs-comment">/**<br> * Filter candidates matching a given regex pattern.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.RegexPatternTypeFilter<br> */</span><br>REGEX,<br><span class="hljs-comment">/** Filter candidates using a given custom<br> * &#123;<span class="hljs-doctag">@link</span> org.springframework.core.type.filter.TypeFilter&#125; implementation.<br> */</span><br>CUSTOM<br>&#125;<br></code></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹å‡ºFilterTypeæœ‰5ä¸ªå±æ€§ï¼Œä¸ºANNOTATIONï¼ŒASSIGNABLE_TYPE,ASPECTJ,REGEX,CUSTOM</p><ul><li>ANNOTATIONä¸ºæŒ‰ç…§æ³¨è§£è¿‡æ»¤</li><li>ASSIGNABLE_TYPEä¸ºæŒ‰ç…§ç±»å‹è¿‡æ»¤</li><li>ASPECTJ,REGEXä¸ºæŒ‰è¡¨è¾¾å¼è¿‡æ»¤</li><li>CUSTOMæ˜¯è‡ªå®šä¹‰<br>ä¸¾ä¾‹typeä¸ºANNOTATIONï¼Œå…¶ä»£ç ä¸º<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ComponentScan</span>(value = <span class="hljs-string">"cn.hdu"</span>, excludeFilters = &#123;<br>        <span class="hljs-meta">@ComponentScan</span>.Filter(type = FilterType.ANNOTATION, classes = &#123;<br>                Controller.class, Service.class<br>        &#125;)<br>&#125;)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span>(<span class="hljs-string">"person"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">person</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-comment">//        System.out.println("start.......");</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(<span class="hljs-number">17</span>, <span class="hljs-string">"lisi"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190526131830.png" alt="ä½¿ç”¨excludeFiltersçš„æµ‹è¯•ç»“æœ"><br>å¯ä»¥å‘ç°Controlleryä¸Serviceçš„å®¹å™¨ä¸è§äº†ï¼Œè¿™æ˜¯å› ä¸ºexcludeFilterså±æ€§èµ·ä½œç”¨äº†</p><ul><li>å½“typeä¸ºCUSTOMæ—¶ï¼ŒæŸ¥çœ‹CUSTOMå¯ä»¥å‘ç°@link org.springframework.core.type.filter.TypeFilter} implementation.æ³¨é‡Šï¼Œå³ä¸ºéœ€è¦å®ç°TypeFilterçš„æ¥å£ï¼Œå…¶ä»£ç å¦‚ä¸‹<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTypeFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TypeFilter</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">match</span><span class="hljs-params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>            AnnotationMetadata annotationMetadata = metadataReader.getAnnotationMetadata();<br>            ClassMetadata classMetadata = metadataReader.getClassMetadata();<br>            Resource resource = metadataReader.getResource();<br>            String className = classMetadata.getClassName();<br>            System.out.println(className);<br>            <span class="hljs-keyword">if</span>(className.contains(<span class="hljs-string">"er"</span>))<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>å…¶è¦å®ç°çš„æ–¹æ³•ä¸ºmatch(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå‚æ•°</p><ul><li><p>metadataReaderå‚æ•°ï¼Œå…¶æ–¹æ³•æœ‰</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MetadataReader</span> </span>&#123;<br>    <span class="hljs-function">Resource <span class="hljs-title">getResource</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">ClassMetadata <span class="hljs-title">getClassMetadata</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">AnnotationMetadata <span class="hljs-title">getAnnotationMetadata</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>metadataReaderFactoryå‚æ•°ä¸ºä¸€ä¸ªmetadataReaderå·¥å‚ï¼Œå¯ä»¥ç”±å·¥å‚å¾—åˆ°metadataReaderå‚æ•°</p></li></ul><p>3.ä½œç”¨åŸŸä¸æ‡’åŠ è½½</p><ul><li>ä½œç”¨åŸŸ @Scopeæ³¨è§£  å…¶å±æ€§æœ‰SCOPE_PROTOTYPEï¼ŒSCOPE_SINGLETONï¼ŒSCOPE_REQUESTï¼ŒSCOPE_SESSIONå››ä¸ªï¼Œæœ€å¤šç”¨çš„ä¸ºSCOPE_PROTOTYPEï¼ŒSCOPE_SINGLETONï¼Œä¸€ä¸ªä¸ºå¤šä¾‹æ¨¡å¼ï¼Œä¸€ä¸ªä¸ºå•ä¾‹æ¨¡å¼ï¼Œå…¶ä¸­é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ã€‚</li><li>æ‡’åŠ è½½ @Lazy  åœ¨é»˜è®¤å•ä¾‹æ¨¡å¼ä¸­ï¼Œåªè¦åˆ›å»ºå®¹å™¨ï¼Œè¿˜æ²¡æœ‰åˆ›å®ä¾‹ä¹‹å‰ï¼Œå°±ä¼šå®Œæˆæ–¹æ³•ï¼ŒåŠ å…¥å•ä¾‹æ¨¡å¼åï¼Œåªæœ‰åˆ›å»ºå®ä¾‹æ‰ä¼šå®Œæˆæ–¹æ³•ã€‚</li></ul><p>4.æŒ‰æ¡ä»¶åˆ¤æ–­æ˜¯å¦åˆ›å»ºbeanå®¹å™¨<br>å½“ä½¿ç”¨@Conditional()æ³¨è§£åï¼Œåœ¨åˆ›å»ºbeanå®¹å™¨ä¹‹å‰ä¼šå…ˆåˆ¤æ–­@Conditional()ä¸­çš„æ¡ä»¶æœ‰æ²¡æœ‰æˆç«‹ï¼Œåªæœ‰æˆç«‹åæ‰ä¼šåˆ›å»ºbeanå®¹å™¨ã€‚<br>Conditionalæºç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Conditional &#123;<br><span class="hljs-comment">/**<br> * All &#123;<span class="hljs-doctag">@link</span> Condition&#125;s that must &#123;<span class="hljs-doctag">@linkplain</span> Condition#matches match&#125;<br> * in order for the component to be registered.<br> */</span><br>Class&lt;? extends Condition&gt;[] value();<br><br>&#125;<br></code></pre></td></tr></table></figure></p><p>ä½¿ç”¨æ­¤æ³¨è§£éœ€è¦å®ç°Conditionæ¥å£ï¼Œå®ç°matches()æ–¹æ³•ã€‚ä¸¾ä¾‹ä»£ç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WindowsCondition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Condition</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">matches</span><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;<br>        Environment environment = context.getEnvironment();<br>        String property = environment.getProperty(<span class="hljs-string">"os.name"</span>);<br>        <span class="hljs-keyword">return</span> property.contains(<span class="hljs-string">"Windows"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>5  å…¶ä»–åˆ›å»ºbeanå®¹å™¨çš„æ³¨è§£</p><ul><li>@Importæ³¨è§£<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Import &#123;<br><span class="hljs-comment">/**<br> * &#123;<span class="hljs-doctag">@link</span> Configuration&#125;, &#123;<span class="hljs-doctag">@link</span> ImportSelector&#125;, &#123;<span class="hljs-doctag">@link</span> ImportBeanDefinitionRegistrar&#125;<br> * or regular component classes to import.<br> */</span><br>Class&lt;?&gt;[] value();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>åœ¨æ­¤æ³¨è§£ä¸­å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªéœ€è¦æ³¨å…¥ç±»çš„.clssçš„å±æ€§ï¼Œä¹Ÿå¯ä»¥å†™ImportSelector.classä¸ImportBeanDefinitionRegistrar.class<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import</span>(&#123;Color.class, MyImportSelector.class, MyImportBeanDefinitionRegistrar.class&#125;)<br></code></pre></td></tr></table></figure></p><ul><li>ImportSelector<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ImportSelector</span> </span>&#123;<br><span class="hljs-comment">/**<br> * Select and return the names of which class(es) should be imported based on<br> * the &#123;<span class="hljs-doctag">@link</span> AnnotationMetadata&#125; of the importing @&#123;<span class="hljs-doctag">@link</span> Configuration&#125; class.<br> */</span><br>String[] selectImports(AnnotationMetadata importingClassMetadata);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>å®ç°ImportSelectoræ¥å£ï¼Œè¿”å›String[]</p><ul><li>ImportBeanDefinitionRegistrar<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ImportBeanDefinitionRegistrar</span> </span>&#123;<br><span class="hljs-comment">/**<br> * Register bean definitions as necessary based on the given annotation metadata of<br> * the importing &#123;<span class="hljs-doctag">@code</span> <span class="hljs-doctag">@Configuration</span>&#125; class.<br> * &lt;p&gt;Note that &#123;<span class="hljs-doctag">@link</span> BeanDefinitionRegistryPostProcessor&#125; types may &lt;em&gt;not&lt;/em&gt; be<br> * registered here, due to lifecycle constraints related to &#123;<span class="hljs-doctag">@code</span> <span class="hljs-doctag">@Configuration</span>&#125;<br> * class processing.<br> * <span class="hljs-doctag">@param</span> importingClassMetadata annotation metadata of the importing class<br> * <span class="hljs-doctag">@param</span> registry current bean definition registry<br> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerBeanDefinitions</span><span class="hljs-params">(<br>AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&quot;&gt;&lt;a href=&quot;#springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&quot; class=&quot;headerlink&quot; title=&quot;springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&quot;&gt;&lt;/a&gt;springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&lt;/h4&gt;&lt;p&gt;1.åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ä¼šåˆ›å»ºä¸€ä¸ªxmlæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªbeanï¼Œå¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;hljs highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;people&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;cn.hdu.bean.Person&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;lisi&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;22&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
