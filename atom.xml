<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-06-18T03:48:42.956Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>å˜¤å˜¤æ€ª&amp;&amp;ğŸ¶</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å®ä¹ day01</title>
    <link href="http://yoursite.com/2019/06/18/%E5%AE%9E%E4%B9%A0day01/"/>
    <id>http://yoursite.com/2019/06/18/å®ä¹ day01/</id>
    <published>2019-06-18T02:33:37.000Z</published>
    <updated>2019-06-18T03:48:42.956Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®ä¹ "><a href="#å®ä¹ " class="headerlink" title="å®ä¹ "></a>å®ä¹ </h2><p>okï¼Œæ¥ä¸‹æ¥éƒ½æ˜¯å®ä¹ çš„ç¯èŠ‚äº†</p><p>ç¬¬ä¸€å¤©ï¼Œå—¯ï¼Œå±…ç„¶ç¬¬ä¸€ä¸ªåˆ°å…¬å¸çš„</p><p>ç„¶åä¸‹åˆè¦æ±‚å†™ä¸€ä¸ªspringbootçš„ç®€å•å¢åˆ æ”¹æŸ¥ï¼Œokï¼Œæ’¸èµ·è¢–å­å¹²ã€‚</p><p>é¦–å…ˆï¼Œå½“ç„¶ä½¿åˆ›å»ºä¸€ä¸ªspringbootçš„é¡¹ç›®ï¼ŒåŠ ä¾èµ–webã€mysqlã€mabatisã€themleafè¿˜æœ‰è¿æ¥æ± ã€‚é¡¹ç›®ç”¨çš„mavenç®¡ç†ï¼Œå…¶pom.xmlå¦‚ä¸‹</p><a id="more"></a><figure class="hljs highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span><br><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zyhl.springboot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>springboot<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Demo project for Spring Boot<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span> <br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åšå¥½äº†å‰æœŸå‡†å¤‡ï¼Œé¦–å…ˆæ•°æ®åº“é…ç½®å†™ä¸€ä¸‹ï¼Œå†™ä¸€ä¸ªapplication.ymlæ–‡ä»¶,åªé…ç½®äº†æœ€åŸºæœ¬çš„æ•°æ®åº“é…ç½®</p><figure class="hljs highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br><span class="hljs-attr">  datasource:</span><br><span class="hljs-attr">    driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-attr">    url:</span> <span class="hljs-attr">jdbc:mysql:///demo?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true</span><br><span class="hljs-attr">    username:</span> <span class="hljs-string">root</span><br><span class="hljs-attr">    password:</span> <span class="hljs-number">123</span><br></code></pre></td></tr></table></figure><p>åœ¨ymlä¸­é…ç½®å®Œåï¼Œéœ€è¦ç¼–å†™ä¸€ä¸ªé…ç½®ç±»åˆ›å»ºå‡ºè¿æ¥æ± ï¼Œå¹¶å°†è¿æ¥æ± æ³¨å…¥å®¹å™¨ä¸­</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataConfig</span> </span>&#123;<br>    <span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource"</span>)<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DruidDataSource();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•°æ®åº“é…ç½®ç»“æŸäº†ï¼Œæ¥ä¸‹æ¥å†™ä¸‰å±‚æ¡†æ¶ï¼Œå—¯ä¹‹å‰å…ˆéœ€è¦åˆ›å»ºè¡¨å’Œbean</p><p><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618110632.png" alt="peopleè¡¨"></p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">People</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">People</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAge</span><span class="hljs-params">(Integer age)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¯ä»¥å®‰å¿ƒå†™ä¸šåŠ¡é€»è¾‘äº†ï¼Œå…ˆåˆ›åŒ…æŠŠ</p><p><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618110942.png" alt="åŒ…ç»“æ„"></p><p>controllerå†™æ§åˆ¶å™¨ï¼Œserviceå†™æœåŠ¡çš„ï¼Œmapperç®¡ç†æ•°æ®åº“çš„æ“ä½œã€‚é¦–å…ˆåŠŸèƒ½æœ‰å¢åˆ æ”¹æŸ¥ï¼Œå› æ­¤å…ˆå†™ä¸€ä¸ªlisté¡µé¢ï¼Œå°±æ˜¯ä¸€ä¸ªè¡¨æ ¼å’¯</p><figure class="hljs highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@&#123;/search&#125;"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>                name:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span>&gt;</span><br>                age:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span>&gt;</span><br>                &amp;nbsp;&amp;nbsp;&amp;nbsp;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>                 <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>age<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">"emp:$&#123;emps&#125;"</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;emp.id&#125;"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;emp.name&#125;"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;emp.age&#125;"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;/edit/&#125;+$&#123;emp.id&#125;"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;/delete/&#125;+$&#123;emp.id&#125;"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;/add&#125;"</span>&gt;</span>æ·»åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿˜éœ€è¦ä¸€ä¸ªaddé¡µé¢</p><figure class="hljs highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@&#123;/search&#125;"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>                name:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span>&gt;</span><br>                age:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span>&gt;</span><br>                &amp;nbsp;&amp;nbsp;&amp;nbsp;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>                 <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>age<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">"emp:$&#123;emps&#125;"</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;emp.id&#125;"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;emp.name&#125;"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;emp.age&#125;"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;/edit/&#125;+$&#123;emp.id&#125;"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;/delete/&#125;+$&#123;emp.id&#125;"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;/add&#125;"</span>&gt;</span>æ·»åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ok,æœ€åéœ€è¦ä¸€ä¸ªedité¡µé¢</p><figure class="hljs highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@&#123;/edit&#125;"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;people.id&#125;"</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;people.name&#125;"</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>age<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;people.age&#125;"</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>ä¿®æ”¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é¦–å…ˆæ‰“å¼€é¡µé¢å¾—æŠŠæ•°æ®åº“çš„ä¿¡æ¯è´´å‡ºæ¥<br>mapperå±‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Select</span>(<span class="hljs-string">"select * from people"</span>)<br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;People&gt; <span class="hljs-title">getAllPeople</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><p>serviceå±‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;People&gt; <span class="hljs-title">getAllPeople</span><span class="hljs-params">()</span></span>&#123;<br>    List&lt;People&gt; allPeople = peopleMapper.getAllPeople();<br>    <span class="hljs-keyword">return</span> allPeople;<br>&#125;<br></code></pre></td></tr></table></figure><p>controllerå±‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/emps"</span>)<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">list</span><span class="hljs-params">(Model model)</span></span>&#123;<br>    List&lt;People&gt; people = peopleService.getAllPeople();<br>    <span class="hljs-comment">//System.out.println();</span><br>    model.addAttribute(<span class="hljs-string">"emps"</span>,people);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"list"</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>okï¼Œçœ‹çœ‹æ•ˆæœ</p><p><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618112212.png" alt="æ•ˆæœ"></p><p>è™½ç„¶æœ‰ç‚¹ä¸‘ï¼Œä¸è¿‡æœ‰æ•ˆæœï¼Œå…¨éƒ½æŸ¥å‡ºæ¥äº†<br>å…¶ä»–æ“ä½œä¹Ÿå·®ä¸å¤šå•¦ï¼Œè´´ä¸€ä¸‹ä»£ç <br>mapperå±‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zyhl.springboot.springboot.mapper;<br><br><span class="hljs-keyword">import</span> com.zyhl.springboot.springboot.bean.People;<br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.*;<br><span class="hljs-keyword">import</span> org.apache.ibatis.jdbc.SQL;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">PeopleMapper</span> </span>&#123;<br><br>    <span class="hljs-meta">@Select</span>(<span class="hljs-string">"select * from people"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;People&gt; <span class="hljs-title">getAllPeople</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-meta">@Select</span>(<span class="hljs-string">"select * from people where id = #&#123;id&#125;"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> People <span class="hljs-title">getPeopleById</span><span class="hljs-params">(Integer id)</span></span>;<br><br>    <span class="hljs-meta">@Options</span>(useGeneratedKeys = <span class="hljs-keyword">true</span>, keyProperty = <span class="hljs-string">"id"</span>)<br>    <span class="hljs-meta">@Insert</span>(<span class="hljs-string">"INSERT INTO people(name,age) VALUES(#&#123;name&#125;,#&#123;age&#125;)"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addPeople</span><span class="hljs-params">(People people)</span></span>;<br><br>    <span class="hljs-meta">@Update</span>(<span class="hljs-string">"UPDATE people SET NAME = #&#123;name&#125;, age = #&#123;age&#125; WHERE id = #&#123;id&#125;"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">editPeople</span><span class="hljs-params">(People people)</span></span>;<br><br>    <span class="hljs-meta">@Delete</span>(<span class="hljs-string">"DELETE FROM people WHERE id = #&#123;id&#125;"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteById</span><span class="hljs-params">(Integer id)</span></span>;<br><br><span class="hljs-comment">//    @Select("select * from people where name like CONCAT('%',#&#123;name&#125;,'%')")</span><br>    <span class="hljs-meta">@SelectProvider</span>(type = PeopleProvider.class, method = <span class="hljs-string">"getPeopleBySearch"</span>)<br>    <span class="hljs-function">List&lt;People&gt; <span class="hljs-title">getPeopleBySearch</span><span class="hljs-params">(People people)</span></span>;<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PeopleProvider</span> </span>&#123;<br>        <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPeopleBySearch</span><span class="hljs-params">(People people)</span></span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SQL()&#123;&#123;<br>                SELECT(<span class="hljs-string">"id,name,age"</span>);<br>                FROM(<span class="hljs-string">"people"</span>);<br>                <span class="hljs-keyword">if</span> (people.getName() != <span class="hljs-keyword">null</span>)&#123;<br>                    WHERE(<span class="hljs-string">"name like CONCAT('%',#&#123;name&#125;,'%')"</span>);<br>                &#125;<br>                <span class="hljs-keyword">if</span> (people.getAge() != <span class="hljs-keyword">null</span>)&#123;<br>                    WHERE(<span class="hljs-string">"age = #&#123;age&#125;"</span>);<br>                &#125;<br>            &#125;&#125;.toString();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>serviceå±‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zyhl.springboot.springboot.service;<br><br><span class="hljs-keyword">import</span> com.zyhl.springboot.springboot.bean.People;<br><span class="hljs-keyword">import</span> com.zyhl.springboot.springboot.mapper.PeopleMapper;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PeopleService</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> PeopleMapper peopleMapper;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;People&gt; <span class="hljs-title">getAllPeople</span><span class="hljs-params">()</span></span>&#123;<br>        List&lt;People&gt; allPeople = peopleMapper.getAllPeople();<br>        <span class="hljs-keyword">return</span> allPeople;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> People <span class="hljs-title">getPeopleBId</span><span class="hljs-params">(Integer id)</span></span>&#123;<br>        People people = peopleMapper.getPeopleById(id);<br>        <span class="hljs-keyword">return</span> people;<br>    &#125;<br><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addPeople</span><span class="hljs-params">(People people)</span></span>&#123;<br>        peopleMapper.addPeople(people);<br>    &#125;<br><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">editPeople</span><span class="hljs-params">(People people)</span></span>&#123;<br>        peopleMapper.editPeople(people);<br><span class="hljs-comment">//        System.out.println(people.getId());</span><br>    &#125;<br><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteById</span><span class="hljs-params">(Integer id)</span></span>&#123;<br>        peopleMapper.deleteById(id);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;People&gt; <span class="hljs-title">getPeopleBySearch</span><span class="hljs-params">(People people)</span></span>&#123;<br>        List&lt;People&gt; list = peopleMapper.getPeopleBySearch(people);<br>        <span class="hljs-keyword">return</span> list;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>controllerå±‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zyhl.springboot.springboot.controller;<br><br><span class="hljs-keyword">import</span> com.zyhl.springboot.springboot.bean.People;<br><span class="hljs-keyword">import</span> com.zyhl.springboot.springboot.service.PeopleService;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.ui.Model;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PeopleController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    PeopleService peopleService;<br><br>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/emps"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">list</span><span class="hljs-params">(Model model)</span></span>&#123;<br>        List&lt;People&gt; people = peopleService.getAllPeople();<br><span class="hljs-comment">//        System.out.println();</span><br>        model.addAttribute(<span class="hljs-string">"emps"</span>,people);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"list"</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/add"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toAdd</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"add"</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/add"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">add</span><span class="hljs-params">(People p)</span></span>&#123;<br>        peopleService.addPeople(p);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/emps"</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/edit/&#123;id&#125;"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toEdit</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> Integer id, Model model)</span>&#123;<br>        People people = peopleService.getPeopleBId(id);<br>        model.addAttribute(<span class="hljs-string">"people"</span>,people);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"edit"</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/edit"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">updateEmployee</span><span class="hljs-params">(People people)</span></span>&#123;<br>        peopleService.editPeople(people);<br><span class="hljs-comment">//        System.out.println(people.getName());</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/emps"</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/delete/&#123;id&#125;"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">delete</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> Integer id)</span>&#123;<br>        peopleService.deleteById(id);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/emps"</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/search"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">search</span><span class="hljs-params">(People people, Model model)</span></span>&#123;<br>        List&lt;People&gt; list = peopleService.getPeopleBySearch(people);<br>        model.addAttribute(<span class="hljs-string">"emps"</span>, list);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"list"</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®Œæˆï¼Œæ•ˆæœçœ‹ä¸‹å›¾<br><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618114258.png" alt="æœç´¢æ•ˆæœ"></p><p><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618114415.png" alt="æ·»åŠ æ•ˆæœ"><br><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618114429.png" alt="æ·»åŠ æ•ˆæœ"></p><p>ä¿®æ”¹idä¸º11çš„people<br><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618114604.png" alt="ä¿®æ”¹æ•ˆæœ"><br><img src="/2019/06/18/å®ä¹ day01/QQæˆªå›¾20190618114621.png" alt="ä¿®æ”¹æ•ˆæœ"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å®ä¹ &quot;&gt;&lt;a href=&quot;#å®ä¹ &quot; class=&quot;headerlink&quot; title=&quot;å®ä¹ &quot;&gt;&lt;/a&gt;å®ä¹ &lt;/h2&gt;&lt;p&gt;okï¼Œæ¥ä¸‹æ¥éƒ½æ˜¯å®ä¹ çš„ç¯èŠ‚äº†&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€å¤©ï¼Œå—¯ï¼Œå±…ç„¶ç¬¬ä¸€ä¸ªåˆ°å…¬å¸çš„&lt;/p&gt;
&lt;p&gt;ç„¶åä¸‹åˆè¦æ±‚å†™ä¸€ä¸ªspringbootçš„ç®€å•å¢åˆ æ”¹æŸ¥ï¼Œokï¼Œæ’¸èµ·è¢–å­å¹²ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œå½“ç„¶ä½¿åˆ›å»ºä¸€ä¸ªspringbootçš„é¡¹ç›®ï¼ŒåŠ ä¾èµ–webã€mysqlã€mabatisã€themleafè¿˜æœ‰è¿æ¥æ± ã€‚é¡¹ç›®ç”¨çš„mavenç®¡ç†ï¼Œå…¶pom.xmlå¦‚ä¸‹&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL_å­¦ä¹ day04</title>
    <link href="http://yoursite.com/2019/06/10/MySQL-%E5%AD%A6%E4%B9%A0day04/"/>
    <id>http://yoursite.com/2019/06/10/MySQL-å­¦ä¹ day04/</id>
    <published>2019-06-10T02:17:42.000Z</published>
    <updated>2019-06-10T07:49:28.493Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQLæŸ¥è¯¢ä¼˜åŒ–"><a href="#MySQLæŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="MySQLæŸ¥è¯¢ä¼˜åŒ–"></a>MySQLæŸ¥è¯¢ä¼˜åŒ–</h2><h3 id="inä¸exists"><a href="#inä¸exists" class="headerlink" title="inä¸exists"></a>inä¸exists</h3><p>æ°¸è¿œå°è¡¨é©±åŠ¨å¤§è¡¨ï¼Œç±»ä¼¼åµŒå¥—å¾ªç¯Nested Loopï¼Œå³å°çš„æ•°æ®é›†é©±åŠ¨å¤§çš„æ•°æ®é›†(RBOåŸç†)</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * from A where id in(select id from B);<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">for select id from B<br>for select * from A where A.id = B.id;<br></code></pre></td></tr></table></figure><a id="more"></a><p>å½“Bè¡¨çš„æ•°æ®é›†å¿…é¡»å°äºAè¡¨çš„æ•°æ®é›†æ—¶ï¼Œç”¨inä¼˜äºexists</p><p>existsç”¨æ³•ï¼š select â€¦ from table where exists(subquery)å°†ä¸»æŸ¥è¯¢çš„æ•°æ®æ”¾åˆ°å­æŸ¥è¯¢ä¸­åšæ¡ä»¶éªŒè¯ï¼Œæ ¹æ®éªŒè¯ç»“æœå†³å®šä¸»æŸ¥è¯¢çš„æ•°æ®ç»“æœæ˜¯å¦å¾—ä»¥ä¿ç•™ï¼Œsubqueryåªè¿”å›trueå’Œfalseï¼Œå› æ­¤existsä¸­çš„æŸ¥è¯¢å¯ä»¥å†™ä¸ºselect 1æˆ–å…¶ä»–</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * from A where exsits(select 1 from B where B.id = A.id);<br></code></pre></td></tr></table></figure><p>ç­‰ä»·äº</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">for select * from A<br>for select * from B where B.id = A.id;<br></code></pre></td></tr></table></figure><p>å½“Aè¡¨çš„æ•°æ®é›†å°äºBè¡¨çš„æ•°æ®é›†æ—¶ï¼Œç”¨existsç”±ä¼˜äºin</p><p>ä¾‹å­ï¼š</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM emp e WHERE e.deptId IN(SELECT id FROM dept d);<br>SELECT * FROM emp e WHERE EXISTS(SELECT 1 FROM dept d WHERE d.id = e.deptId);<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„sqlæ˜¯ç”¨inå…³é”®è¯ï¼Œä¸‹é¢çš„sqlæ˜¯ä½¿ç”¨existså…³é”®è¯ï¼Œè¿™ä¸¤ä¸ªè¯­å¥å¾—åˆ°çš„ç»“æœéƒ½ä¸€æ ·</p><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610134919.png" alt="ç»“æœ"><br>ä½¿ç”¨inå…³é”®è¯çš„sqlè¯­å¥ï¼Œempè¡¨é©±åŠ¨deptè¡¨ï¼›ä½¿ç”¨existså…³é”®è¯çš„sqlè¯­å¥ï¼Œdeptè¡¨é©±åŠ¨empè¡¨ã€‚</p><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610134453.png" alt="empè¡¨"><br><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610142158.png" alt="deptè¡¨"><br>å¯ä»¥çœ‹å‡ºempæ˜¯å¤§è¡¨ï¼Œdeptæ˜¯å°è¡¨ï¼Œæ ¹æ®å°è¡¨é©±åŠ¨å¤§è¡¨çš„åŸåˆ™ï¼Œdeptè¡¨é©±åŠ¨empè¡¨ï¼Œå…¶explainç»“æœ</p><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610143405.png" alt="inçš„ç»“æœ"><br>å…¶deptè¡¨çš„typeä¸ºunique_subquery</p><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610143520.png" alt="existsçš„ç»“æœ"><br>å…¶deptè¡¨çš„typeä¸ºeq_ref<br>ä½¿ç”¨existsçš„ç»“æœæ¯”ä½¿ç”¨inçš„ç»“æœå¥½</p><h3 id="order-byå…³é”®å­—ä¼˜åŒ–"><a href="#order-byå…³é”®å­—ä¼˜åŒ–" class="headerlink" title="order byå…³é”®å­—ä¼˜åŒ–"></a>order byå…³é”®å­—ä¼˜åŒ–</h3><p>Order byæ—¶select *æ˜¯ä¸€ä¸ªå¤§å¿Œï¼ŒåªQueryéœ€è¦çš„å­—æ®µ<br>order byå­å¥ï¼Œå°½é‡ä½¿ç”¨indexæ–¹å¼æ’åºï¼Œé¿å…ä½¿ç”¨FileSortæ–¹å¼æ’åºã€‚MySQLæ”¯æŒä¸¤ç§æ’åºæ–¹å¼ï¼ŒFileSortå’ŒIndexï¼ŒIndexæ•ˆç‡é«˜ï¼Œå®ƒæŒ‡MySQLæ‰«æç´¢å¼•æœ¬èº«å®Œæˆæ’åºã€‚FileSortæ–¹å¼æ•ˆç‡ä½ã€‚<br>Order Byæ»¡è¶³ä¸¤ç§æƒ…å†µï¼Œä¼šä½¿ç”¨Indexæ–¹å¼æ’åº</p><ul><li>order byè¯­å¥ä½¿ç”¨ç´¢å¼•æœ€å·¦å‰åˆ—</li><li>ä½¿ç”¨whereå­å¥ä¸order byå­å¥æ¡ä»¶åˆ—ç»„åˆæ»¡è¶³æœ€å·¦å‰åˆ—</li></ul><p>å°½å¯èƒ½åœ¨ç´¢å¼•åˆ—ä¸Šå®Œæˆæ’åºæ“ä½œï¼Œéµç…§ç´¢å¼•å»ºçš„æœ€ä½³å·¦å‰ç¼€ï¼Œå¦‚æœä¸åœ¨ç´¢å¼•åˆ—ä¸Šï¼Œfilesortæœ‰ä¸¤ç§ç®—æ³•ï¼Œmysqlå°±è¦å¯åŠ¨åŒè·¯æ’åºå’Œå•è·¯æ’åº</p><ul><li>åŒè·¯æ’åºï¼šMySQL4.1ä¹‹å‰æ˜¯ä½¿ç”¨åŒè·¯æ’åºï¼Œå­—é¢æ„æ€å°±æ˜¯ä¸¤æ¬¡æ‰«æç£ç›˜ï¼Œæœ€ç»ˆå¾—åˆ°æ•°æ®ï¼Œè¯»å–è¡ŒæŒ‡é’ˆå’Œorder byåˆ—ï¼Œå¯¹ä»–ä»¬è¿›è¡Œæ’åºï¼Œç„¶åæ‰«æå·²ç»æ’åºå¥½çš„åˆ—è¡¨ï¼ŒæŒ‰ç…§åˆ—è¡¨ä¸­çš„å€¼é‡æ–°ä»åˆ—è¡¨ä¸­çš„å€¼é‡æ–°ä»åˆ—è¡¨ä¸­è¯»å–å¯¹åº”çš„æ•°æ®è¾“å‡ºä»ç£ç›˜å–æ’åºå­—æ®µï¼Œåœ¨bufferè¿›è¡Œæ’åºï¼Œå†ä»ç£ç›˜å–å…¶ä»–å­—æ®µ</li><li>å•è·¯æ’åºï¼šä»ç£ç›˜è¯»å–æŸ¥è¯¢éœ€è¦çš„åˆ—ï¼ŒæŒ‰ç…§order byåˆ—åœ¨bufferå¯¹ä»–ä»¬è¿›è¡Œæ’åºï¼Œç„¶åæ‰«ææ’åºåçš„åˆ—è¡¨è¿›è¡Œè¾“å‡ºï¼Œå®ƒæ•ˆç‡æ›´å¿«ä¸€äº›ï¼Œé¿å…äº†ç¬¬äºŒæ¬¡è¯»å–æ•°æ®ã€‚å¹¶ä¸”æŠŠéšæœºIOå˜æˆäº†é¡ºåºIOï¼Œä½†æ˜¯å®ƒä¼šä½¿ç”¨æ›´å¤šå‘ç©ºé—´ï¼Œå› ä¸ºå®ƒæŠŠæ¯ä¸€è¡Œéƒ½ä¿å­˜åœ¨å†…å­˜ä¸­</li></ul><p>ç»“è®ºä»¥åŠå¼•ç”³çš„é—®é¢˜ï¼šç”±äºå•è·¯æ˜¯åå‡ºçš„ï¼Œæ€»ä½“è€Œè¨€å¥½è¿‡åŒè·¯ä½†æ˜¯å•è·¯æœ‰é—®é¢˜ï¼šåœ¨sort_bufferä¸­ï¼Œæ–¹æ³•äºŒæ¯”æ–¹æ³•ä¸€è¦å ç”¨å¾ˆå¤šçš„ç©ºé—´ï¼Œå› ä¸ºæ–¹æ³•äºŒæ˜¯æŠŠæ‰€æœ‰å­—æ®µéƒ½å–å‡ºæ¥ï¼Œæ‰€ä»¥æœ‰å¯èƒ½å–å‡ºæ•°æ®çš„å¤§å°è¶…å‡ºäº†sort_bufferçš„å®¹é‡ï¼Œå¯¼è‡´æ¯æ¬¡åªèƒ½å–sort_bufferå®¹é‡å¤§å°çš„æ•°æ®ï¼Œè¿›è¡Œæ’åº(åˆ›å»ºtmpæ–‡ä»¶ï¼Œå¤šè·¯åˆå¹¶)ï¼Œæ’åºå®Œåå†å–sort_bufferå®¹é‡å¤§å°ï¼Œâ€¦ï¼Œä»è€Œå¤šæ¬¡IOã€‚æœ¬æ¥åƒçœä¸€æ¬¡IOæ“ä½œï¼Œåè€Œå¯¼è‡´äº†å¤§é‡çš„IOæ“ä½œï¼Œåè€Œå¾—ä¸å¿å¤±<br>ä¼˜åŒ–ç­–ç•¥ï¼šå¢å¤§sort_buffer_sizeå‚æ•°è®¾ç½®ï¼›å¢å¤§max_length_for_sort_dataå‚æ•°çš„è®¾ç½®</p><p>ä¾‹å­ï¼š</p><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610144133.png" alt="tblaè¡¨"><br>ä¸ºå…¶ageä¸birthåŠ ç´¢å¼•</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE INDEX idx_A_ageBirth ON tblA(age,birth);<br></code></pre></td></tr></table></figure><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610144327.png" alt="ç´¢å¼•"><br>å¯¹ä»¥ä¸‹çš„sqlè¯­å¥è¿›è¡Œexplain</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">EXPLAIN SELECT * FROM tblA WHERE age &gt; 20 ORDER BY age;<br>EXPLAIN SELECT * FROM tblA WHERE age &gt; 20 ORDER BY age,birth;<br>EXPLAIN SELECT * FROM tblA WHERE age &gt; 20 ORDER BY birth;<br>EXPLAIN SELECT * FROM tblA WHERE age &gt; 20 ORDER BY birth,age;<br>EXPLAIN SELECT * FROM tblA ORDER BY birth;<br>EXPLAIN SELECT * FROM tblA ORDER BY age ASC,birth DESC;<br></code></pre></td></tr></table></figure><p>å‰ä¸¤æ¡sqlè¯­å¥æ²¡æœ‰å‡ºç°Using filesortï¼Œå…¶ä½™çš„sqléƒ½å‡ºç°äº†Using filesort</p><h3 id="group-byå…³é”®å­—ä¼˜åŒ–"><a href="#group-byå…³é”®å­—ä¼˜åŒ–" class="headerlink" title="group byå…³é”®å­—ä¼˜åŒ–"></a>group byå…³é”®å­—ä¼˜åŒ–</h3><p>ä¸order byå‡ ä¹ä¸€è‡´<br>group byå®è´¨æ˜¯å…ˆæ’åºåè¿›è¡Œåˆ†ç»„ï¼ŒæŒ‰ç…§ç´¢å¼•é”®çš„æœ€ä½³å·¦å‰ç¼€<br>å½“æ— æ³•ä½¿ç”¨ç´¢å¼•åˆ—ï¼Œå¢å¤§max_length_for_sort_dataå‚æ•°çš„è®¾ç½®ï¼›å¢å¤§sor_buffer_sizeå‚æ•°çš„è®¾ç½®<br>whereé«˜äºhavingï¼Œèƒ½å†™åœ¨whereé™å®šçš„æ¡ä»¶å°±ä¸éœ€è¦havingé™å®š</p><h2 id="show-profileçš„ä½¿ç”¨"><a href="#show-profileçš„ä½¿ç”¨" class="headerlink" title="show profileçš„ä½¿ç”¨"></a>show profileçš„ä½¿ç”¨</h2><h3 id="æ…¢æŸ¥è¯¢çš„å¼€å¯å¹¶æ•è·"><a href="#æ…¢æŸ¥è¯¢çš„å¼€å¯å¹¶æ•è·" class="headerlink" title="æ…¢æŸ¥è¯¢çš„å¼€å¯å¹¶æ•è·"></a>æ…¢æŸ¥è¯¢çš„å¼€å¯å¹¶æ•è·</h3><p>1.æ˜¯ä»€ä¹ˆ<br>MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯MySQLæä¾›çš„ä¸€ç§æ—¥å¿—è®°å½•ï¼Œå®ƒç”¨æ¥è®°å½•MySQLä¸­å“åº”æ—¶é—´è¶…è¿‡é˜ˆå€¼çš„è¯­å¥ï¼Œå…·ä½“æŒ‡è¿è¡Œæ—¶é—´è¶…è¿‡long_query_timeçš„å€¼çš„SQLï¼Œåˆ™ä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼Œlong_query_timeçš„é»˜è®¤å€¼ä¸º10ï¼Œæ„æ€æ˜¯è¿è¡Œè¶…è¿‡10ç§’ä»¥ä¸Šçš„è¯­å¥ï¼Œç”±å®ƒæ¥æŸ¥çœ‹å“ªäº›SQLè¶…å‡ºäº†æˆ‘ä»¬çš„æœ€å¤§å¿è€çš„æ—¶é—´å€¼ï¼Œæ¯”å¦‚ä¸€æ¡sqlæ‰§è¡Œè¶…è¿‡5ç§’é’Ÿï¼Œå°±ç®—æ…¢SQLï¼Œå¸Œæœ›èƒ½æ”¶é›†è¶…è¿‡5ç§’çš„sqlï¼Œç»“åˆä¹‹å‰çš„explainè¿›è¡Œå…¨é¢çš„åˆ†æ</p><p>2.æ€ä¹ˆä½¿ç”¨<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLæ•°æ®åº“æ²¡æœ‰å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®å‚æ•°<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SHOW VARIABLES LIKE &apos;%slow_query_log%&apos;;<br></code></pre></td></tr></table></figure></p><p>æ­¤sqlå¯ä»¥æ˜¾ç¤ºæœ‰æ²¡æœ‰æ‰“å¼€æ—¥å¿—<br><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610150338.png" alt="ç»“æœ"><br>ç”±å›¾å¯çŸ¥ï¼Œæ—¥å¿—æ²¡æœ‰æ‰“å¼€ï¼Œä¸”æ—¥å¿—çš„ä½ç½®åœ¨cç›˜</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SET GLOBAL slow_query_log = 1;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°çš„sqlå¯ä»¥æ‰“å¼€æ—¥å¿—ï¼Œå¹¶åœ¨æ—¥å¿—ä¸­æ‰“å°è¶…è¿‡è®¾å®šæ—¶é—´long_query_timeå€¼çš„SQL    </p><h3 id="ä½¿ç”¨show-profile"><a href="#ä½¿ç”¨show-profile" class="headerlink" title="ä½¿ç”¨show profile"></a>ä½¿ç”¨show profile</h3><p>1.æ˜¯ä»€ä¹ˆ<br>æ˜¯MySQæä¾›å¯ä»¥ç”¨æ¥åˆ†æå½“å‰ä¼šè¯ä¸­è¯­å¥æ‰§è¡Œçš„èµ„æºæ¶ˆè€—æƒ…å†µï¼Œå¯ä»¥ç”¨äºSQLçš„è°ƒä¼˜æµ‹é‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå‚æ•°å¤„äºå…³é—­çŠ¶æ€ï¼Œå¹¶ä¿å­˜æœ€è¿‘15æ¬¡çš„è¿è¡Œç»“æœ</p><p>2.åˆ†ææ­¥éª¤</p><ul><li><p>æŸ¥çœ‹å½“å‰ç‰ˆæœ¬æ˜¯å¦æ”¯æŒ show variables like â€˜profilingâ€™;<br><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610152620.png" alt="ç»“æœ"><br>ç”±ä¸Šå›¾å¯çŸ¥ï¼Œæ­¤ç‰ˆæœ¬æ”¯æŒprofileï¼Œä¸”é»˜è®¤å…³é—­</p></li><li><p>å¼€å¯åŠŸèƒ½</p></li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">set profiling = on;<br></code></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ç»“æœ</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SHOW profiles;<br></code></pre></td></tr></table></figure><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610152951.png" alt="ç»“æœ"><br>ä½¿ç”¨Query_IDçš„å€¼å¯ä»¥å¯¹å…·ä½“çš„ä¸€æ¡sqlè¯­å¥è¿›è¡Œåˆ†æï¼Œæ¯”å¦‚å¯¹17å·sqlè¯­å¥è¿›è¡Œåˆ†æ</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SHOW profile cpu,block io FOR QUERY 17;<br></code></pre></td></tr></table></figure><p><img src="/2019/06/10/MySQL-å­¦ä¹ day04/QQæˆªå›¾20190610154732.png" alt="ç»“æœ"></p><ul><li>ç»“è®º<br>å‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œä»£è¡¨sqlè¯­å¥éœ€è¦ä¼˜åŒ–<br>1.concerting HEAP to MyISAM æŸ¥è¯¢ç»“æœå¤ªå¤§ï¼Œå†…å­˜ä¸å¤Ÿç”¨ï¼Œå¾€ç£ç›˜ä¸Šæ¬<br>2.creating tmp table åˆ›å»ºä¸´æ—¶è¡¨ï¼Œæ‹·è´æ•°æ®åˆ°ä¸´æ—¶è¡¨ï¼Œç”¨å®Œååˆ é™¤<br>3.copying to tmp table on disk æŠŠå†…å­˜ä¸­ä¸´æ—¶è¡¨å¤åˆ¶åˆ°ç£ç›˜<br>4.locked</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQLæŸ¥è¯¢ä¼˜åŒ–&quot;&gt;&lt;a href=&quot;#MySQLæŸ¥è¯¢ä¼˜åŒ–&quot; class=&quot;headerlink&quot; title=&quot;MySQLæŸ¥è¯¢ä¼˜åŒ–&quot;&gt;&lt;/a&gt;MySQLæŸ¥è¯¢ä¼˜åŒ–&lt;/h2&gt;&lt;h3 id=&quot;inä¸exists&quot;&gt;&lt;a href=&quot;#inä¸exists&quot; class=&quot;headerlink&quot; title=&quot;inä¸exists&quot;&gt;&lt;/a&gt;inä¸exists&lt;/h3&gt;&lt;p&gt;æ°¸è¿œå°è¡¨é©±åŠ¨å¤§è¡¨ï¼Œç±»ä¼¼åµŒå¥—å¾ªç¯Nested Loopï¼Œå³å°çš„æ•°æ®é›†é©±åŠ¨å¤§çš„æ•°æ®é›†(RBOåŸç†)&lt;/p&gt;
&lt;figure class=&quot;hljs highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs mysql&quot;&gt;select * from A where id in(select id from B);&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç­‰ä»·äº&lt;/p&gt;
&lt;figure class=&quot;hljs highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs mysql&quot;&gt;for select id from B&lt;br&gt;		for select * from A where A.id = B.id;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL_å­¦ä¹ day03</title>
    <link href="http://yoursite.com/2019/06/04/MySQL-%E5%AD%A6%E4%B9%A0day03/"/>
    <id>http://yoursite.com/2019/06/04/MySQL-å­¦ä¹ day03/</id>
    <published>2019-06-04T11:23:04.000Z</published>
    <updated>2019-06-04T12:39:04.331Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQLä¹‹ç´¢å¼•ä¼˜åŒ–"><a href="#MySQLä¹‹ç´¢å¼•ä¼˜åŒ–" class="headerlink" title="MySQLä¹‹ç´¢å¼•ä¼˜åŒ–"></a>MySQLä¹‹ç´¢å¼•ä¼˜åŒ–</h2><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><h4 id="å•è¡¨"><a href="#å•è¡¨" class="headerlink" title="å•è¡¨"></a>å•è¡¨</h4><p>é¦–å…ˆå»ºä¸€å¼ è¡¨ï¼Œå¹¶æ’å…¥æ•°æ®</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE IF NOT EXISTS `article`(<br>id INT(10) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,<br>author_id INT(10) UNSIGNED NOT NULL,<br>category_id INT(10) UNSIGNED NOT NULL,<br>views INT(10) UNSIGNED NOT NULL,<br>comments INT(10) UNSIGNED NOT NULL,<br>title VARBINARY(255) NOT NULL,<br>content TEXT NOT NULL);<br></code></pre></td></tr></table></figure><a id="more"></a><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO `article`(<br>`author_id`,`category_id`,`views`,`comments`,`title`,`content`)<br>VALUES(1,1,1,1,&apos;1&apos;,&apos;1&apos;),<br>(2,2,2,2,&apos;2&apos;,&apos;2&apos;),<br>(1,1,3,3,&apos;3&apos;,&apos;3&apos;);<br></code></pre></td></tr></table></figure><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604193556.png" alt="å•è¡¨æ•°æ®"><br>ç°è¦æŸ¥æ‰¾åˆ°category_idä¸º1ï¼Œcommentsä¸º1ï¼Œä¸”viewsæœ€å¤§çš„id</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT id,author_id FROM article<br>WHERE category_id = 1<br>AND comments &gt; 1<br>ORDER BY views DESC<br>LIMIT 1;<br></code></pre></td></tr></table></figure><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604194118.png" alt="ç»“æœ"><br>åœ¨ä¸åŠ ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œå™¨explainçš„ç»“æœä¸º</p><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604194249.png" alt="ç»“æœ"><br>ä»ä¸­å¯ä»¥çœ‹åˆ°å…¶typeçš„å€¼ä¸ºALLï¼Œå³æ˜¯å…¨è¡¨æœç´¢ï¼ŒALLè¡¨ç¤ºæ­¤SQLè¯­å¥ä¸å¥½ï¼Œéœ€è¦ä¼˜åŒ–ã€‚keyçš„å€¼ä¸ºnullï¼Œè¡¨ç¤ºæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼ŒExtraåˆ—å‡ºç°Using filesortï¼Œè¡¨æ˜æœ‰æ–‡ä»¶å†…æ’åºï¼Œå…¶æŸ¥è¯¢æ•ˆç‡åº•(å½“æ•°æ®ä¸ºç™¾ä¸‡çº§åˆ«æ—¶)ã€‚å› ä¸ºæŸ¥è¯¢æ¡ä»¶å‡ºç°äº†category_idï¼Œcommentsä¸viewsï¼Œå› æ­¤ç»™æ­¤ä¸‰ä¸ªå­—æ®µæ·»åŠ ç´¢å¼•ã€‚</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE INDEX idx_author_ccv ON article(category_id,comments,views);<br></code></pre></td></tr></table></figure><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604195212.png" alt="ç»“æœ"><br>å…¶typeä»ALLå˜æˆäº†rangeï¼Œæ€§èƒ½å¾—åˆ°äº†æå‡ï¼Œå¹¶ä¸”ç”¨åˆ°äº†ç´¢å¼•ä½†æ˜¯ï¼Œå…¶extraä¾æ—§æœ‰æ–‡ä»¶å†…æ’åºï¼Œæ‰€ä»¥è¿˜éœ€è¦è¯¥ç´¢å¼•ã€‚<br>æœ€ç»ˆå‘ç°åªéœ€è¦å°†category_idå’Œviewsä¸¤ä¸ªå­—æ®µåŠ ç´¢å¼•ï¼Œå…¶ç»“æœæ›´å¥½</p><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604195527.png" alt="ç»“æœ"><br>å‘ç°ï¼Œåªå°†category_idå’Œviewsä¸¤ä¸ªå­—æ®µåŠ ç´¢å¼•åï¼Œå…¶typeå˜æˆrefï¼Œæ€§èƒ½æ›´å¥½ï¼Œç”¨åˆ°äº†ç´¢å¼•ï¼Œå…¶refåˆ—ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œä¸”ä¸å‡ºç°äº†æ–‡ä»¶å†…æ’åºã€‚</p><h4 id="ä¸¤è¡¨"><a href="#ä¸¤è¡¨" class="headerlink" title="ä¸¤è¡¨"></a>ä¸¤è¡¨</h4><p>å»ºè¡¨è¯­å¥</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE IF NOT EXISTS `class`(<br>`id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,<br>`card` INT(10) UNSIGNED NOT NULL,<br>PRIMARY KEY(`id`));<br>CREATE TABLE IF NOT EXISTS `book`(<br>`bookid` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,<br>`card` INT(10) UNSIGNED NOT NULL,<br>PRIMARY KEY(`bookid`));<br>INSERT INTO class(card) VALUES<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20)));<br>INSERT INTO book(card) VALUES<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20)));<br></code></pre></td></tr></table></figure><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604200000.png" alt="classè¡¨"></p><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604200031.png" alt="bookè¡¨"><br>å°†ä¸¤ä¸ªè¡¨è¿›è¡Œå·¦è¿æ¥</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM class LEFT JOIN book ON class.card = book.card;<br></code></pre></td></tr></table></figure><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604200157.png" alt="ç»“æœ"><br>åœ¨æ²¡æœ‰å»ºç´¢å¼•çš„æƒ…å†µä¸‹å…¶explainåå¾—åˆ°çš„è¡¨ä¸º</p><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604200350.png" alt="ç»“æœ"><br>å‘ç°ä¸¤å¼ è¡¨çš„typeéƒ½ä¸ºALLï¼Œä¸”éƒ½æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ã€‚<br>ç»™classè¡¨çš„cardå­—æ®µåŠ ç´¢å¼•</p><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604200552.png" alt="ç»“æœ"><br>å‘ç°classè¡¨ç”¨åˆ°äº†ç´¢å¼•ï¼Œä¸”å…¶typeå˜ä¸ºäº†indexã€‚<br>å°†bookè¡¨çš„cardå­—æ®µåŠ ç´¢å¼•åï¼Œå…¶ç»“æœä¸º</p><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604200919.png" alt="ç»“æœ"><br>bookè¡¨çš„typeä¸ºrefï¼Œæ¯”classåŠ ç´¢å¼•çš„æ•ˆæœæ›´å¥½ã€‚</p><p>ç»“è®ºï¼šå·¦è¿æ¥æ—¶ç»™å³è¾¹çš„è¡¨åŠ ç´¢å¼•ï¼Œå³è¿æ¥æ—¶ç»™å·¦è¾¹çš„è¡¨åŠ ç´¢å¼•</p><h4 id="ä¸‰è¡¨"><a href="#ä¸‰è¡¨" class="headerlink" title="ä¸‰è¡¨"></a>ä¸‰è¡¨</h4><p>å»ºä¸€å¼ phoneè¡¨</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE IF NOT EXISTS `phone`(<br>`phoneid` INT(10) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,<br>`card` INT(10) UNSIGNED NOT NULL)ENGINE = INNODB;<br>INSERT INTO phone(card) VALUES<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20))),<br>(FLOOR(1+(RAND() * 20)));<br></code></pre></td></tr></table></figure><p>å°†classè¡¨ï¼Œbookè¡¨ä¸phoneè¡¨è¿›è¡Œè¿æ¥</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM class LEFT JOIN book<br>ON class.card = book.card LEFT JOIN phone<br>ON book.card = phone.card;<br></code></pre></td></tr></table></figure><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604201650.png" alt="æŸ¥è¯¢ç»“æœ"><br>æŒ‰ç…§ä¹‹å‰ä¸¤è¡¨çš„ç»“è®ºï¼Œåšé“¾æ¥éœ€è¦ç»™å³è¾¹çš„è¡¨åŠ ç´¢å¼•ï¼Œå› æ­¤éœ€è¦ç»™bookä¸phoneåŠ ç´¢å¼•ï¼ŒåŠ ç´¢å¼•åçš„explainç»“æœä¸º</p><p><img src="/2019/06/04/MySQL-å­¦ä¹ day03/QQæˆªå›¾20190604201911.png" alt="ç»“æœ"></p><h3 id="ç´¢å¼•åº”è¯¥å¦‚ä½•ä½¿ç”¨"><a href="#ç´¢å¼•åº”è¯¥å¦‚ä½•ä½¿ç”¨" class="headerlink" title="ç´¢å¼•åº”è¯¥å¦‚ä½•ä½¿ç”¨"></a>ç´¢å¼•åº”è¯¥å¦‚ä½•ä½¿ç”¨</h3><p>å»ºç«‹staffsè¡¨<br><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE staffs(<br>id INT PRIMARY KEY AUTO_INCREMENT,<br>NAME VARCHAR(24) NOT NULL DEFAULT &apos;&apos; COMMENT&apos;å§“å&apos;,<br>age INT NOT NULL DEFAULT 0 COMMENT &apos;å¹´é¾„&apos;,<br>pos VARCHAR(20) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;èŒä½&apos;,<br>add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &apos;å…¥èŒæ—¶é—´&apos;<br>)CHARSET utf8 COMMENT &apos;å‘˜å·¥è®°å½•è¡¨&apos;;<br>INSERT INTO staffs(NAME,age,pos,add_time) VALUES<br>(&apos;z3&apos;,22,&apos;manager&apos;,NOW());<br>INSERT INTO staffs(NAME,age,pos,add_time) VALUES<br>(&apos;July&apos;,23,&apos;dev&apos;,NOW());<br>INSERT INTO staffs(NAME,age,pos,add_time) VALUES<br>(&apos;2000&apos;,23,&apos;dev&apos;,NOW());<br></code></pre></td></tr></table></figure></p><p>ç»™nameã€ageã€poså­—æ®µåŠ ç´¢å¼•</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE staffs ADD INDEX adx_staffs_nameAgePos(NAME,age,pos);<br></code></pre></td></tr></table></figure><ul><li>æœ€å¥½æ˜¯å…¨å€¼åŒ¹é…</li></ul><p>åœ¨æŸ¥è¯¢çš„æ—¶å€™æœ€å¥½ç”¨åˆ°NAME,age,posè¿™ä¸‰ä¸ªå­—æ®µ</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM staffs WHERE NAME = &apos;July&apos; AND age =25 AND pos = &apos;dev&apos;;<br></code></pre></td></tr></table></figure><ul><li>æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</li></ul><p>å¦‚æœç´¢å¼•äº†å¤šåˆ—ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ã€‚æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦å‰åˆ—å¼€å§‹å¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•çš„ä¸­é—´åˆ—</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">EXPLAIN SELECT * FROM staffs WHERE NAME=&apos;July&apos; AND pos = &apos;dev&apos;;<br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå…¶whereæ¡ä»¶ä¸ºé‚£ä¹ˆä¸posï¼Œè·³è¿‡äº†ageï¼Œé‚£ä¹ˆposçš„ç´¢å¼•å°†ä¸è¢«ä½¿ç”¨</p><ul><li>ç´¢å¼•åˆ—ä¸Šå°‘è®¡ç®—</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">EXPLAIN SELECT * FROM staffs WHERE NAME = &apos;July&apos;;<br>``` <br>ä¸Šè¿°SQLè¯­å¥ç”¨åˆ°äº†ç´¢å¼•<br><br>```mysql<br>EXPLAIN SELECT * FROM staffs WHERE LEFT(NAME,4) = &apos;July&apos;;<br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šçš„æŸ¥è¯¢ç´¢å¼•å®ç°ï¼Œå› ä¸ºåœ¨nameåˆ—ä¸Šç”¨åˆ°äº†leftå‡½æ•°</p><ul><li>æ— æ³•ä½¿ç”¨ç´¢å¼•ä¸­èŒƒå›´æŸ¥è¯¢å³è¾¹çš„ç´¢å¼•</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">EXPLAIN SELECT * FROM staffs WHERE NAME = &apos;July&apos; AND age &gt; 25 AND pos = &apos;dev&apos;;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°è¯­å¥ageåˆ—ç”¨åˆ°äº†èŒƒå›´æŸ¥è¯¢ï¼Œå› æ­¤posçš„ç´¢å¼•å¤±æ•ˆ</p><ul><li><p>å°‘ç”¨select *ï¼Œå°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</p></li><li><p>ä½¿ç”¨ä¸ç­‰äº(!=æˆ–&lt;&gt;)ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</p></li><li><p>ä½¿ç”¨is nullä¸is not nullï¼Œä¹Ÿä¼šä½¿ç´¢å¼•å¤±æ•ˆ</p></li><li><p>likeä»¥é€šé…ç¬¦å¼€å¤´(%***)çš„ç´¢å¼•ä¼šå¤±æ•ˆ</p></li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">EXPLAIN SELECT * FROM staffs WHERE NAME LIKE &apos;%J%&apos;;<br>EXPLAIN SELECT * FROM staffs WHERE NAME LIKE &apos;%J&apos;;<br>EXPLAIN SELECT * FROM staffs WHERE NAME LIKE &apos;J%&apos;;<br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šä¸‰æ¡è¯­å¥ï¼Œåªæœ‰æœ€åä¸€æ¡è¯­å¥ç´¢å¼•å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå½“å¿…é¡»è¦ä½¿ç”¨â€%**%â€œä½œä¸ºæŸ¥è¯¢æ¡ä»¶æ—¶ï¼Œå»ºè®®ä½¿ç”¨è¦†ç›–ç´¢å¼•</p><ul><li><p>å­—ç¬¦ä¸²ä¸åŠ å•å¼•å·ï¼Œç´¢å¼•ä¼šå¤±æ•ˆã€‚å› æ­¤varcharç±»å‹çš„å­—æ®µéœ€è¦åŠ â€™â€™</p></li><li><p>å°‘ç”¨orï¼Œç”¨orè¿æ¥æ—¶ä¼šä½¿ç´¢å¼•å¤±æ•ˆâ€™</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQLä¹‹ç´¢å¼•ä¼˜åŒ–&quot;&gt;&lt;a href=&quot;#MySQLä¹‹ç´¢å¼•ä¼˜åŒ–&quot; class=&quot;headerlink&quot; title=&quot;MySQLä¹‹ç´¢å¼•ä¼˜åŒ–&quot;&gt;&lt;/a&gt;MySQLä¹‹ç´¢å¼•ä¼˜åŒ–&lt;/h2&gt;&lt;h3 id=&quot;ç¤ºä¾‹&quot;&gt;&lt;a href=&quot;#ç¤ºä¾‹&quot; class=&quot;headerlink&quot; title=&quot;ç¤ºä¾‹&quot;&gt;&lt;/a&gt;ç¤ºä¾‹&lt;/h3&gt;&lt;h4 id=&quot;å•è¡¨&quot;&gt;&lt;a href=&quot;#å•è¡¨&quot; class=&quot;headerlink&quot; title=&quot;å•è¡¨&quot;&gt;&lt;/a&gt;å•è¡¨&lt;/h4&gt;&lt;p&gt;é¦–å…ˆå»ºä¸€å¼ è¡¨ï¼Œå¹¶æ’å…¥æ•°æ®&lt;/p&gt;
&lt;figure class=&quot;hljs highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs mysql&quot;&gt;CREATE TABLE IF NOT EXISTS `article`(&lt;br&gt;id INT(10) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,&lt;br&gt;author_id INT(10) UNSIGNED NOT NULL,&lt;br&gt;category_id INT(10) UNSIGNED NOT NULL,&lt;br&gt;views INT(10) UNSIGNED NOT NULL,&lt;br&gt;comments INT(10) UNSIGNED NOT NULL,&lt;br&gt;title VARBINARY(255) NOT NULL,&lt;br&gt;content TEXT NOT NULL);&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL_å­¦ä¹ day02</title>
    <link href="http://yoursite.com/2019/06/03/MySQL-%E5%AD%A6%E4%B9%A0day02/"/>
    <id>http://yoursite.com/2019/06/03/MySQL-å­¦ä¹ day02/</id>
    <published>2019-06-03T11:20:06.000Z</published>
    <updated>2019-06-03T12:38:46.940Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQLä¹‹explainè§£è¯»"><a href="#MySQLä¹‹explainè§£è¯»" class="headerlink" title="MySQLä¹‹explainè§£è¯»"></a>MySQLä¹‹explainè§£è¯»</h2><h3 id="explainå¦‚ä½•ä½¿ç”¨"><a href="#explainå¦‚ä½•ä½¿ç”¨" class="headerlink" title="explainå¦‚ä½•ä½¿ç”¨"></a>explainå¦‚ä½•ä½¿ç”¨</h3><p>explain + SQLè¯­å¥<br>egï¼šEXPLAIN SELECT * FROM stuinfo;</p><p><img src="/2019/06/03/MySQL-å­¦ä¹ day02/QQæˆªå›¾20190603193328.png" alt="ç»“æœ"></p><a id="more"></a><h3 id="explainèƒ½å¹²ä»€ä¹ˆ"><a href="#explainèƒ½å¹²ä»€ä¹ˆ" class="headerlink" title="explainèƒ½å¹²ä»€ä¹ˆ"></a>explainèƒ½å¹²ä»€ä¹ˆ</h3><p>å¯ä»¥å¯¹SQLè¯­å¥è¿›è¡Œæ€§èƒ½åˆ†æ</p><ul><li>è¡¨çš„è¯»å–é¡ºåº</li><li>æ•°æ®è¯»å–æ“ä½œçš„æ“ä½œç±»å‹</li><li>å“ªäº›ç´¢å¼•å¯ä»¥ä½¿ç”¨</li><li>å“ªäº›ç´¢å¼•è¢«å®é™…çŸ³è‹±</li><li>è¡¨ä¹‹é—´çš„å¼•ç”¨</li><li>æ¯å¼ è¡¨æœ‰å¤šå°‘è¡Œè¢«ä¼˜åŒ–å™¨æŸ¥è¯¢</li></ul><h3 id="ç»“æœæ¯åˆ—åˆ†æ"><a href="#ç»“æœæ¯åˆ—åˆ†æ" class="headerlink" title="ç»“æœæ¯åˆ—åˆ†æ"></a>ç»“æœæ¯åˆ—åˆ†æ</h3><h4 id="id"><a href="#id" class="headerlink" title="id"></a>id</h4><p>1.idç›¸åŒï¼Œæ‰§è¡Œé¡ºåºç”±ä¸Šè‡³ä¸‹<br>2.idä¸åŒï¼Œå¦‚æœæ˜¯å­æŸ¥è¯¢ï¼Œidä¼šé€’å¢ï¼Œidå€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆè¢«æ‰§è¡Œ<br>ç”±æ­¤å¯çŸ¥ï¼šidå¦‚æœç›¸åŒï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç»„ï¼Œä»ä¸Šå¾€ä¸‹é¡ºåºæ‰§è¡Œï¼Œåœ¨æ‰€æœ‰ç»„ä¸­ï¼Œidå€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œ</p><h4 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h4><p>è¿™ä¸€åˆ—æœ‰6ä¸ªå±æ€§</p><ol><li>simpleï¼šç®€å•æŸ¥è¯¢</li><li>primaryï¼šæœ€å¤–å±‚</li><li>subqueryï¼šå­æŸ¥è¯¢</li><li>derivedï¼šè¡ç”Ÿ</li><li>unionï¼šè”åˆï¼Œç¬¬äºŒä¸ªselectå‡ºç°åœ¨unionå</li><li>resultï¼šä»unionè¡¨è·å–çš„selectç»“æœ</li></ol><h4 id="table"><a href="#table" class="headerlink" title="table"></a>table</h4><p>æŸ¥æ‰¾çš„è¡¨å</p><h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>typeç”¨æ¥è¯„ä»·SQLè¯­å¥çš„æ€§èƒ½å¥½åï¼Œæœ‰8ä¸ªå±æ€§ALLã€indexã€rangeã€refã€eq_refã€constã€systemã€NULL<br>æ€§èƒ½ä»å¥½åˆ°åçš„æ’åºï¼šsystem &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL</p><ul><li>systemï¼šè¡¨ä¸­åªæœ‰ä¸€è¡Œè®°å½•</li><li>constï¼šé€šè¿‡ç´¢å¼•ä¸€æ¬¡å°±æ‰¾åˆ°</li><li>eq_refï¼šå”¯ä¸€æ€§ç´¢å¼•æ‰«æï¼Œå¯¹æ¯ä¸ªç´¢å¼•é”®ï¼Œè¡¨ä¸­åªæœ‰ä¸€æ¡è®°å½•ä¸ä¹‹åŒ¹é…</li><li>refï¼šéå”¯ä¸€æ€§ç´¢å¼•æ‰«æï¼Œè¿”å›åŒ¹é…æŸä¸ªå•ç‹¬å€¼çš„æ‰€æœ‰è¡Œ</li><li>rangeï¼šåªæ£€ç´¢ç»™çš„èŒƒå›´çš„è¡Œï¼Œä½¿ç”¨ä¸€ä¸ªç´¢å¼•é€‰æ‹©è¡Œï¼Œä¸€èˆ¬ä¸ºwhereåé¢å‡ºç°çš„betweenã€&lt;ã€&gt;ã€in</li><li>indesï¼šå…¨ç´¢å¼•æ‰«æ</li><li>allï¼šå…¨è¡¨æ‰«æ</li></ul><h4 id="possible-keysã€keyã€key-len"><a href="#possible-keysã€keyã€key-len" class="headerlink" title="possible_keysã€keyã€key_len"></a>possible_keysã€keyã€key_len</h4><p>possible_keysï¼šæ˜¾ç¤ºå¯èƒ½åº”ç”¨åˆ°è¿™å¼ è¡¨çš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªï¼ŒæŸ¥è¯¢æ¶‰åŠåˆ°çš„å­—æ®µä¸Šè‹¥å­˜åœ¨ç´¢å¼•ï¼Œåˆ™ç´¢å¼•è¢«åˆ—å‡ºï¼Œä½†ä¸ä¸€å®šè¢«æŸ¥è¯¢å®é™…ä½¿ç”¨<br>keyï¼šå®é™…è¢«ä½¿ç”¨çš„ç´¢å¼•ï¼Œè‹¥æœä¸ºnullï¼Œåˆ™æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼ŒæŸ¥è¯¢ä¸­è‹¥ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ï¼Œåˆ™è¯¥ç´¢å¼•ä»…å‡ºç°åœ¨keyåˆ—è¡¨ä¸­<br>key_lenï¼šè¡¨ç¤ºæ‰€æœ‰ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œå¯ä»¥é€šè¿‡è¯¥åˆ—è®¡ç®—æŸ¥è¯¢ä¸­ä½¿ç”¨çš„ç´¢å¼•é•¿åº¦</p><h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><p>æ˜¾ç¤ºç´¢å¼•çš„å“ªä¸€åˆ—è¢«ä½¿ç”¨äº†ï¼Œå¦‚æœå¯èƒ½çš„è¯æ˜¯ä¸€ä¸ªå¸¸æ•°</p><h4 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h4><p>æ ¹æ®è¡¨ç»Ÿè®¡ä¿¡æ¯åŠç´¢å¼•é€‰ç”¨æƒ…å†µï¼Œå¤§è‡´ä¼°ç®—å‡ºæ‰¾åˆ°æ‰€éœ€çš„è®°å½•æ‰€éœ€è¦è¯»å–çš„è¡Œæ•°</p><h4 id="extra"><a href="#extra" class="headerlink" title="extra"></a>extra</h4><ol><li>Using filesortï¼šæ–‡ä»¶æ’åº</li><li>Using temporaryï¼šä½¿ç”¨ä¸´æ—¶è¡¨ä¿å­˜ä¸­é—´çš„ç»“æœ</li><li>Using indexï¼šè¡¨ç¤ºç›¸åº”çš„selectæ“ä½œä¸­ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ï¼Œé¿å…äº†è®¿é—®è¡¨çš„æ•°æ®è¡Œ</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQLä¹‹explainè§£è¯»&quot;&gt;&lt;a href=&quot;#MySQLä¹‹explainè§£è¯»&quot; class=&quot;headerlink&quot; title=&quot;MySQLä¹‹explainè§£è¯»&quot;&gt;&lt;/a&gt;MySQLä¹‹explainè§£è¯»&lt;/h2&gt;&lt;h3 id=&quot;explainå¦‚ä½•ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#explainå¦‚ä½•ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;explainå¦‚ä½•ä½¿ç”¨&quot;&gt;&lt;/a&gt;explainå¦‚ä½•ä½¿ç”¨&lt;/h3&gt;&lt;p&gt;explain + SQLè¯­å¥&lt;br&gt;egï¼šEXPLAIN SELECT * FROM stuinfo;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/06/03/MySQL-å­¦ä¹ day02/QQæˆªå›¾20190603193328.png&quot; alt=&quot;ç»“æœ&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>spring_äº‹åŠ¡</title>
    <link href="http://yoursite.com/2019/05/31/spring-%E4%BA%8B%E5%8A%A1/"/>
    <id>http://yoursite.com/2019/05/31/spring-äº‹åŠ¡/</id>
    <published>2019-05-31T04:33:46.000Z</published>
    <updated>2019-05-31T05:06:38.117Z</updated>
    
    <content type="html"><![CDATA[<h2 id="springäº‹åŠ¡çš„æ€»ç»“"><a href="#springäº‹åŠ¡çš„æ€»ç»“" class="headerlink" title="springäº‹åŠ¡çš„æ€»ç»“"></a>springäº‹åŠ¡çš„æ€»ç»“</h2><h3 id="äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–"><a href="#äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–" class="headerlink" title="äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–"></a>äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–</h3><p>åœ¨mavenä¸­å¯¼å…¥spring-aspectsã€spring-jdbcã€mysql-connector-javaã€c3p0çš„ä¾èµ–<br>mysql-connector-java 8.0ä»¥ä¸Šç‰ˆæœ¬çš„æ³¨æ„ï¼š</p><ul><li>DriverClassä¸åœ¨æ˜¯com.mysql.jdbc.Driverï¼Œè€Œæ˜¯com.mysql.cj.jdbc.Driver</li><li>JdbcUrlé™¤äº†éœ€è¦æŒ‡å®šå…·ä½“çš„åº“å¤–ï¼Œè¿˜éœ€è¦åŠ å…¥?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true<br>å¦‚æœæ²¡æœ‰ç¬¦åˆä»¥ä¸Šçš„è¦æ±‚ï¼Œä¼šæŠ¥é”™</li></ul><p><img src="/2019/05/31/spring-äº‹åŠ¡/QQæˆªå›¾20190531124243.png" alt="æŠ¥é”™ä¿¡æ¯"></p><p>å³ä¼šæŠ¥æ— æ³•æ‰“å¼€JDBCè¿æ¥çš„é”™è¯¯</p><a id="more"></a><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"$&#123;db.username&#125;"</span>)<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"$&#123;db.password&#125;"</span>)<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"$&#123;db.driver&#125;"</span>)<br>    <span class="hljs-keyword">private</span> String driver;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> PropertyVetoException </span>&#123;<br>        ComboPooledDataSource dataSource = <span class="hljs-keyword">new</span> ComboPooledDataSource();<br>        dataSource.setUser(username);<br>        dataSource.setPassword(password);<br>        dataSource.setDriverClass(driver);<br>        dataSource.setJdbcUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/ee19day01?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true"</span>);<br>        <span class="hljs-keyword">return</span> dataSource;<br>    &#125;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> JdbcTemplate <span class="hljs-title">jdbcTemplate</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> PropertyVetoException </span>&#123;<br>        JdbcTemplate jdbcTemplate = <span class="hljs-keyword">new</span> JdbcTemplate(dataSource());<br>        <span class="hljs-keyword">return</span> jdbcTemplate;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties">db.username = root<br>db.password = 123<br>db.driver = com.mysql.cj.jdbc.Driver<br></code></pre></td></tr></table></figure><h3 id="æ³¨è§£äº‹åŠ¡"><a href="#æ³¨è§£äº‹åŠ¡" class="headerlink" title="æ³¨è§£äº‹åŠ¡"></a>æ³¨è§£äº‹åŠ¡</h3><p>åœ¨éœ€è¦äº‹åŠ¡æ”¯æŒçš„ç±»ä¸Šè¡¨ä¸Šäº‹åŠ¡çš„æ³¨è§£ï¼Œ@Transactionalï¼Œä¹‹åéœ€è¦åœ¨é…ç½®ç±»ä¸Šæ³¨è§£@EnableTransactionManagementï¼Œè¿™ä¸ªæ³¨è§£æ˜¯ç”¨æ¥æ‰“å¼€æ³¨è§£äº‹åŠ¡çš„ã€‚æœ€åéœ€è¦æ³¨å†ŒPlatformTransactionManagerç»„ä»¶åˆ°å®¹å™¨ä¸­ã€‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxService</span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> TxDao txDao;<br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insertService</span><span class="hljs-params">()</span></span>&#123;<br>        txDao.insert();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxDao</span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insert</span><span class="hljs-params">()</span></span>&#123;<br>        String sql = <span class="hljs-string">"INSERT INTO t_user(name, password) VALUES(?, ?)"</span>;<br>        String name = UUID.randomUUID().toString().substring(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);<br>        String psw = UUID.randomUUID().toString().substring(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);<br>        jdbcTemplate.update(sql, name, psw);<br>        System.out.println(<span class="hljs-string">"æ’å…¥æ•°æ®"</span>);<br><span class="hljs-comment">//        int i = 1/0;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableTransactionManagement</span><br><span class="hljs-meta">@ComponentScan</span>(<span class="hljs-string">"cn.hdu.tx"</span>)<br><span class="hljs-meta">@PropertySource</span>(<span class="hljs-string">"classpath:/db.properties"</span>)<br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> PlatformTransactionManager <span class="hljs-title">platformTransactionManager</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> PropertyVetoException </span>&#123;<br>        DataSourceTransactionManager transactionManager = <span class="hljs-keyword">new</span> DataSourceTransactionManager(dataSource());<br>        <span class="hljs-keyword">return</span> transactionManager;<br>    &#125;    <br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœspringä¸­æ²¡æœ‰æ³¨å†ŒPlatformTransactionManagerç»„ä»¶ï¼Œä¼šæŠ¥é”™<br><img src="/2019/05/31/spring-äº‹åŠ¡/QQæˆªå›¾20190531130539.png" alt="æŠ¥é”™ä¿¡æ¯"></p><p>æŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºæ²¡æœ‰å®šä¹‰PlatformTransactionManagerç»„ä»¶åˆ°Beanä¸­</p><h3 id="æµ‹è¯•ç¨‹åº"><a href="#æµ‹è¯•ç¨‹åº" class="headerlink" title="æµ‹è¯•ç¨‹åº"></a>æµ‹è¯•ç¨‹åº</h3><p><img src="/2019/05/31/spring-äº‹åŠ¡/QQæˆªå›¾20190531125622.png" alt="æ•°æ®åº“åŸå§‹è¡¨"><br>ä»è¡¨ä¸­çœ‹åˆ°æœ€åä¸€æ¡è®°å½•çš„idæ˜¯15<br>å½“å†æ‰§è¡Œä¸€éæ’å…¥ç¨‹åºåï¼š</p><p><img src="/2019/05/31/spring-äº‹åŠ¡/QQæˆªå›¾20190531125817.png" alt="æ•°æ®åº“æ’å…¥æ•°æ®"><br>å¯ä»¥å‘ç°æ•°æ®åº“å¤šäº†ä¸€æ¡æ•°æ®</p><p>å½“åœ¨daoå±‚å‡ºç°é”™è¯¯æ—¶ï¼Œè¿™é‡Œå°†åœ¨daoå±‚åŠ å…¥int i = 1/0ç¨‹åºï¼Œæ‰§è¡Œç¨‹åºçš„ç»“æœä¸ºï¼š</p><p><img src="/2019/05/31/spring-äº‹åŠ¡/QQæˆªå›¾20190531130030.png" alt="æ•°æ®åº“æ’å…¥æ•°æ®æ—¶æœ‰é”™è¯¯"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿™æ ·å­ä¾¿å®ç°äº†äº‹åŠ¡çš„åŠŸèƒ½ï¼Œå½“è¿›è¡Œäº‹åŠ¡æ—¶æœ‰é”™è¯¯æ—¶ï¼Œäº‹åŠ¡å°†è¿›è¡Œå›æ»šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;springäº‹åŠ¡çš„æ€»ç»“&quot;&gt;&lt;a href=&quot;#springäº‹åŠ¡çš„æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;springäº‹åŠ¡çš„æ€»ç»“&quot;&gt;&lt;/a&gt;springäº‹åŠ¡çš„æ€»ç»“&lt;/h2&gt;&lt;h3 id=&quot;äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–&quot;&gt;&lt;a href=&quot;#äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–&quot; class=&quot;headerlink&quot; title=&quot;äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–&quot;&gt;&lt;/a&gt;äº‹åŠ¡çš„ç¯å¢ƒä¾èµ–&lt;/h3&gt;&lt;p&gt;åœ¨mavenä¸­å¯¼å…¥spring-aspectsã€spring-jdbcã€mysql-connector-javaã€c3p0çš„ä¾èµ–&lt;br&gt;mysql-connector-java 8.0ä»¥ä¸Šç‰ˆæœ¬çš„æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DriverClassä¸åœ¨æ˜¯com.mysql.jdbc.Driverï¼Œè€Œæ˜¯com.mysql.cj.jdbc.Driver&lt;/li&gt;
&lt;li&gt;JdbcUrlé™¤äº†éœ€è¦æŒ‡å®šå…·ä½“çš„åº“å¤–ï¼Œè¿˜éœ€è¦åŠ å…¥?characterEncoding=utf8&amp;amp;useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;rewriteBatchedStatements=true&lt;br&gt;å¦‚æœæ²¡æœ‰ç¬¦åˆä»¥ä¸Šçš„è¦æ±‚ï¼Œä¼šæŠ¥é”™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/2019/05/31/spring-äº‹åŠ¡/QQæˆªå›¾20190531124243.png&quot; alt=&quot;æŠ¥é”™ä¿¡æ¯&quot;&gt;&lt;/p&gt;
&lt;p&gt;å³ä¼šæŠ¥æ— æ³•æ‰“å¼€JDBCè¿æ¥çš„é”™è¯¯&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQLå­¦ä¹ _diay01</title>
    <link href="http://yoursite.com/2019/05/29/MySQL%E5%AD%A6%E4%B9%A0-diay011/"/>
    <id>http://yoursite.com/2019/05/29/MySQLå­¦ä¹ -diay011/</id>
    <published>2019-05-29T12:19:20.000Z</published>
    <updated>2019-05-29T12:48:51.574Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQLæ·±å…¥å­¦ä¹ -01"><a href="#MySQLæ·±å…¥å­¦ä¹ -01" class="headerlink" title="MySQLæ·±å…¥å­¦ä¹ _01"></a>MySQLæ·±å…¥å­¦ä¹ _01</h2><h3 id="å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“"><a href="#å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“" class="headerlink" title="å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“"></a>å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“</h3><p>MyISAMã€InnoDBä¸ºå¸¸ç”¨çš„ä¸¤ä¸ªMySQLæ•°æ®åº“å­˜å‚¨å¼•æ“ï¼Œå…¶åŒºåˆ«ä¸ºï¼š</p><a id="more"></a><table><thead><tr><th style="text-align:center">å±æ€§</th><th style="text-align:center">MyISAM</th><th style="text-align:center">InnoDB</th></tr></thead><tbody><tr><td style="text-align:center">ä¸»å¤–é”®</td><td style="text-align:center">N</td><td style="text-align:center">Y</td></tr><tr><td style="text-align:center">äº‹åŠ¡</td><td style="text-align:center">N</td><td style="text-align:center">Y</td></tr><tr><td style="text-align:center">è¡Œè¡¨é”</td><td style="text-align:center">è¡¨é”</td><td style="text-align:center">è¡Œé”</td></tr><tr><td style="text-align:center">ç¼“å­˜</td><td style="text-align:center">åªç¼“å­˜ç´¢å¼•</td><td style="text-align:center">æ—¢ç¼“å­˜ç´¢å¼•ä¹Ÿç¼“å­˜çœŸå®æ•°æ®</td></tr><tr><td style="text-align:center">è¡¨ç©ºé—´</td><td style="text-align:center">å°</td><td style="text-align:center">å¤§</td></tr><tr><td style="text-align:center">å…³æ³¨ç‚¹</td><td style="text-align:center">æ€§èƒ½</td><td style="text-align:center">äº‹åŠ¡</td></tr></tbody></table><h3 id="å»ºç«‹ç´¢å¼•"><a href="#å»ºç«‹ç´¢å¼•" class="headerlink" title="å»ºç«‹ç´¢å¼•"></a>å»ºç«‹ç´¢å¼•</h3><p>å‡è®¾æœ‰ä¸€å¼ userè¡¨ï¼Œè¡¨ä¸­æœ‰idã€nameã€emailã€num</p><ul><li>å¦‚æœæŸ¥æ‰¾è¡¨çš„æ¡ä»¶ä¸ºname<br>å»ºç«‹å•å€¼ç´¢å¼•ï¼šcreate index idx_user_name on user(name);</li><li>æœæŸ¥æ‰¾è¡¨çš„æ¡ä»¶ä¸ºnameä¸email<br>å»ºç«‹å¤åˆç´¢å¼•ï¼šcreate index idx_user_nameEmail on user(name,email);</li></ul><h3 id="ä»€ä¹ˆæ˜¯ç´¢å¼•"><a href="#ä»€ä¹ˆæ˜¯ç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ˜¯ç´¢å¼•"></a>ä»€ä¹ˆæ˜¯ç´¢å¼•</h3><p>ç´¢å¼•æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å¾—æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œç´¢å¼•çš„ç›®çš„åœ¨äºæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚å¯ä»¥ç†è§£ä¸ºæ’å¥½åºçš„å¿«é€ŸæŸ¥æ‰¾çš„æ•°æ®ç»“æ„ã€‚åœ¨Javaå¼€å‘ä¸­ï¼Œç´¢å¼•ä¸€èˆ¬çš„æ•°æ®ç»“æ„ä¸ºBTreeã€‚</p><h3 id="ç´¢å¼•çš„ä¼˜åŠ¿"><a href="#ç´¢å¼•çš„ä¼˜åŠ¿" class="headerlink" title="ç´¢å¼•çš„ä¼˜åŠ¿"></a>ç´¢å¼•çš„ä¼˜åŠ¿</h3><p>1.æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬<br>2.é€šè¿‡ç´¢å¼•å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºæˆæœ¬ï¼Œé™ä½CPUçš„æ¶ˆè€—</p><h3 id="éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"><a href="#éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—" class="headerlink" title="éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"></a>éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—</h3><p>1.ä¸»å»ºä¼šå»ºç«‹çš„ä¸ºå”¯ä¸€ç´¢å¼•<br>2.é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ<br>3.å¤–é”®å…³ç³»<br>4.æŸ¥è¯¢ä¸­æ’åºçš„å­—æ®µ<br>5.æŸ¥è¯¢ä¸­ç»Ÿè®¡æˆ–åˆ†ç»„çš„å­—æ®µ</p><h3 id="ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"><a href="#ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—" class="headerlink" title="ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—"></a>ä¸éœ€è¦å»ºç«‹ç´¢å¼•çš„åˆ—</h3><p>1.é¢‘ç¹æ›´æ–°çš„å­—æ®µ<br>2.whereæ¡ä»¶ç”¨ä¸åˆ°çš„å­—æ®µ<br>3.è¡¨è®°å½•å¤ªå°‘(å°äº300ä¸‡æ¡æ•°æ®)<br>4.æ•°æ®é‡å¤ä¸”åˆ†å¸ƒå¹³å‡çš„å­—æ®µ</p><h3 id="æ€§èƒ½åˆ†æ"><a href="#æ€§èƒ½åˆ†æ" class="headerlink" title="æ€§èƒ½åˆ†æ"></a>æ€§èƒ½åˆ†æ</h3><p>ä½¿ç”¨explain + SQLè¯­å¥ï¼Œå¯ä»¥å¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œæ€§èƒ½åˆ†æ<br>å…·ä½“çš„åˆ†æè¿˜åœ¨å­¦ä¹ ä¸æ•´ç†ï¼Œéœ€è¦æ˜å¤©æ›´æ–°</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQLæ·±å…¥å­¦ä¹ -01&quot;&gt;&lt;a href=&quot;#MySQLæ·±å…¥å­¦ä¹ -01&quot; class=&quot;headerlink&quot; title=&quot;MySQLæ·±å…¥å­¦ä¹ _01&quot;&gt;&lt;/a&gt;MySQLæ·±å…¥å­¦ä¹ _01&lt;/h2&gt;&lt;h3 id=&quot;å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&quot;&gt;&lt;a href=&quot;#å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&quot; class=&quot;headerlink&quot; title=&quot;å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&quot;&gt;&lt;/a&gt;å¸¸è§çš„MySQLå­˜å‚¨å¼•æ“&lt;/h3&gt;&lt;p&gt;MyISAMã€InnoDBä¸ºå¸¸ç”¨çš„ä¸¤ä¸ªMySQLæ•°æ®åº“å­˜å‚¨å¼•æ“ï¼Œå…¶åŒºåˆ«ä¸ºï¼š&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>spring_aop</title>
    <link href="http://yoursite.com/2019/05/29/spring-aop/"/>
    <id>http://yoursite.com/2019/05/29/spring-aop/</id>
    <published>2019-05-29T04:01:25.000Z</published>
    <updated>2019-05-29T04:45:07.448Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SpringAopçš„å­¦ä¹ "><a href="#SpringAopçš„å­¦ä¹ " class="headerlink" title="SpringAopçš„å­¦ä¹ "></a>SpringAopçš„å­¦ä¹ </h2><h3 id="ä»€ä¹ˆæ˜¯aop"><a href="#ä»€ä¹ˆæ˜¯aop" class="headerlink" title="ä»€ä¹ˆæ˜¯aop"></a>ä»€ä¹ˆæ˜¯aop</h3><p>aopå³æ˜¯é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´åŠ¨æ€åœ°å°†æŸæ®µç¨‹åºä»£ç åˆ‡å…¥åˆ°æŒ‡å®šä½ç½®è¿›è¡Œè¿è¡Œçš„ç¼–ç¨‹æ–¹å¼ã€‚å…¶åŸç†æ˜¯åŸºäºåŠ¨æ€ä»£ç†ã€‚</p><a id="more"></a><h3 id="aopç¼–ç¨‹æ­¥éª¤"><a href="#aopç¼–ç¨‹æ­¥éª¤" class="headerlink" title="aopç¼–ç¨‹æ­¥éª¤"></a>aopç¼–ç¨‹æ­¥éª¤</h3><h4 id="1-åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–"><a href="#1-åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–" class="headerlink" title="1.åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–"></a>1.åœ¨mavenå·¥ç¨‹ä¸­å¯¼å…¥aspectsä¾èµ–</h4><figure class="hljs highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aspects<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.3.12.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»"><a href="#2-å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»" class="headerlink" title="2.å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»"></a>2.å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»</h4><p>åœ¨æ­¤å®šä¹‰ä¸€ä¸ªé™¤æ³•çš„ä¸šåŠ¡é€»è¾‘<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MathCaculator</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">div</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j)</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"æ–¹æ³•å¼€å§‹"</span>);<br>        <span class="hljs-keyword">return</span> i/j;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="3-å®šä¹‰åˆ‡é¢ç±»"><a href="#3-å®šä¹‰åˆ‡é¢ç±»" class="headerlink" title="3.å®šä¹‰åˆ‡é¢ç±»"></a>3.å®šä¹‰åˆ‡é¢ç±»</h4><p>æ­¤åˆ‡é¢ç±»åœ¨è°ƒç”¨ä¸šåŠ¡é€»è¾‘ä¹‹å‰ï¼Œä¹‹åï¼Œè¿”å›æ­£å¸¸ï¼Œå‡ºç°å¼‚å¸¸ç­‰æƒ…å†µä¸‹è¢«æ‰§è¡Œ<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogAspect</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logStart</span><span class="hljs-params">(JoinPoint joinPoint)</span></span>&#123;<br>        Object[] args = joinPoint.getArgs();<br>        System.out.println(joinPoint.getSignature().getName()+<span class="hljs-string">"å¼€å§‹ä¹‹å‰"</span>+ Arrays.asList(args));<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logEnd</span><span class="hljs-params">(JoinPoint joinPoint)</span></span>&#123;<br>        System.out.println(joinPoint.getSignature().getName() + <span class="hljs-string">"ç»“æŸå"</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logReturn</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span></span>&#123;<br>        System.out.println(joinPoint.getSignature().getName()+<span class="hljs-string">"æ­£å¸¸è¿”å›:"</span> + result);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logException</span><span class="hljs-params">(JoinPoint joinPoint, Exception exception)</span></span>&#123;<br>        System.out.println(joinPoint.getSignature().getName() + <span class="hljs-string">"å‡ºç°å¼‚å¸¸:"</span> + exception);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>é€šçŸ¥çš„æ–¹æ³•æœ‰å‰ç½®ã€åç½®ã€è¿”å›æ­£å¸¸å€¼ã€å¼‚å¸¸ã€ç¯ç»•é€šçŸ¥ã€‚<br>å‰ç½®ï¼š@Beforeï¼Œåç½®ï¼š@Afterï¼Œ è¿”å›æ­£å¸¸ï¼š@AfterReturningï¼Œ å¼‚å¸¸ï¼š@AfterThrowingï¼Œ ç¯ç»•ï¼š@Around</p><h4 id="4-ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ"><a href="#4-ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ" class="headerlink" title="4.ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ"></a>4.ç»™åˆ‡é¢ç±»ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œ</h4><p>@Before(â€œpublic int cn.hdu.aop.MathCaculator.<em>(..)â€)<br>@After(â€œpublic int cn.hdu.aop.MathCaculator.</em>(..)â€)<br>â€¦..<br>å¦‚æœç›®æ ‡æ–¹æ³•ä¸ºåŒä¸€ä¸ªæ—¶ï¼Œå¯ä»¥æå–å…¬å…±åˆ‡å…¥ç‚¹<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogAspect</span> </span>&#123;<br><span class="hljs-meta">@Pointcut</span>(<span class="hljs-string">"execution(public int cn.hdu.aop.MathCaculator.*(..))"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">point</span><span class="hljs-params">()</span></span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>å¦‚æœæœ¬ç±»ä½¿ç”¨æ­¤åˆ‡ç‚¹æ—¶ï¼Œç›´æ¥ä½¿ç”¨æ–¹æ³•åï¼Œå¦‚ï¼š@Before(â€œpoint()â€)<br>å¦‚æœåˆ«çš„ç±»ä½¿ç”¨æ­¤åˆ‡ç‚¹æ—¶ï¼Œä½¿ç”¨åˆ‡ç‚¹çš„ç±»åï¼Œå¦‚ï¼š@Before(â€œcn.hdu.aop.LogAspect.point()â€)</p><h4 id="5-å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­"><a href="#5-å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­" class="headerlink" title="5.å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­"></a>5.å°†åˆ‡é¢ç±»ä¸ä¸šåŠ¡é€»è¾‘ç±»åŠ å…¥åˆ°å®¹å™¨ä¸­</h4><p>åœ¨é…ç½®ç±»ä¸­å°†ä¸Šè¿°çš„ç±»åŠ å…¥åˆ°å®¹å™¨<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfigOfAOP</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> MathCaculator <span class="hljs-title">mathCaculator</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MathCaculator();<br>    &#125;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> LogAspect <span class="hljs-title">logAspect</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LogAspect();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><h4 id="6-éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»"><a href="#6-éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»" class="headerlink" title="6.éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»"></a>6.éœ€å‘ŠçŸ¥springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»</h4><p>åœ¨åˆ‡é¢ç±»ä¸Šä½¿ç”¨@Aspectæ³¨è§£</p><h4 id="7-åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£"><a href="#7-åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£" class="headerlink" title="7.åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£"></a>7.åœ¨é…ç½®ç±»ä¸­åŠ å…¥å¼€å¯åˆ‡é¢è‡ªåŠ¨ä»£ç†æ³¨è§£</h4><p>@EnableAspectJAutoProxy</p><h4 id="8-æµ‹è¯•ä»£ç "><a href="#8-æµ‹è¯•ä»£ç " class="headerlink" title="8.æµ‹è¯•ä»£ç "></a>8.æµ‹è¯•ä»£ç </h4><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AOPTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfAOP.class);<br>        MathCaculator contextBean = (MathCaculator) context.getBean(<span class="hljs-string">"mathCaculator"</span>);<br>        contextBean.div(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨beanå®¹å™¨ä¸­è·å–mathCaculatorç»„ä»¶ï¼Œè°ƒç”¨ç»„ä»¶çš„div()æ–¹æ³•</p><p><img src="/2019/05/29/spring-aop/QQæˆªå›¾20190529123653.png" alt="æµ‹è¯•ç»“æœ"></p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AOPTest</span> </span>&#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfAOP.class);<br>        MathCaculator contextBean = (MathCaculator) context.getBean(<span class="hljs-string">"mathCaculator"</span>);<br>        contextBean.div(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå‡ºç°å¼‚å¸¸ï¼Œå…¶æµ‹è¯•ç»“æœä¸ºï¼š</p><p><img src="/2019/05/29/spring-aop/QQæˆªå›¾20190529123945.png" alt="æµ‹è¯•ç»“æœ"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SpringAopçš„å­¦ä¹ &quot;&gt;&lt;a href=&quot;#SpringAopçš„å­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;SpringAopçš„å­¦ä¹ &quot;&gt;&lt;/a&gt;SpringAopçš„å­¦ä¹ &lt;/h2&gt;&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯aop&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯aop&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯aop&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯aop&lt;/h3&gt;&lt;p&gt;aopå³æ˜¯é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´åŠ¨æ€åœ°å°†æŸæ®µç¨‹åºä»£ç åˆ‡å…¥åˆ°æŒ‡å®šä½ç½®è¿›è¡Œè¿è¡Œçš„ç¼–ç¨‹æ–¹å¼ã€‚å…¶åŸç†æ˜¯åŸºäºåŠ¨æ€ä»£ç†ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…</title>
    <link href="http://yoursite.com/2019/05/28/spring-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/"/>
    <id>http://yoursite.com/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/</id>
    <published>2019-05-28T07:26:07.000Z</published>
    <updated>2019-05-28T09:08:05.993Z</updated>
    
    <content type="html"><![CDATA[<h2 id="spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…"><a href="#spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…" class="headerlink" title="spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…"></a>spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…</h2><h3 id="1-å±æ€§èµ‹å€¼"><a href="#1-å±æ€§èµ‹å€¼" class="headerlink" title="1.å±æ€§èµ‹å€¼"></a>1.å±æ€§èµ‹å€¼</h3><p>ä½¿ç”¨@valueæ³¨è§£ä¾¿å¯ä»¥ä½¿å®¹å™¨ä¸­çš„å±æ€§è¿›è¡Œèµ‹å€¼</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"#&#123;22-2&#125;"</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"zhangsan"</span>)<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"$&#123;person.nickNmae&#125;"</span>)<br>    <span class="hljs-keyword">private</span> String nickNmae;<br>    <span class="hljs-comment">//get()ã€set()æ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure><a id="more"></a><p>1.@Value(â€œzhangsanâ€)ï¼Œåœ¨valueä¸­ç›´æ¥å†™å…¥å±æ€§ï¼ŒåŸºæœ¬æ•°å€¼éƒ½å¯ä»¥ã€‚<br>2.@Value(â€œ#{22-2}â€)ï¼ŒSPELè¡¨è¾¾å¼ï¼Œåœ¨è¡¨è¾¾å¼ä¸­å¯ä»¥è¿›è¡Œè¿ç®—ã€‚<br>3.@Value(â€œ${person.nickNmae}â€)ï¼Œè·å–åˆ°å¤–éƒ¨é…ç½®æ–‡ä»¶ä¸­çš„å€¼</p><ul><li><p>é€šè¿‡å¤–éƒ¨é…ç½®æ–‡ä»¶è·å–å±æ€§å€¼æ—¶ï¼Œé¦–å…ˆéœ€è¦ç¼–å†™ä¸€ä¸ªpropertiesæ–‡ä»¶</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties">person.nickNmae=xiaolisi<br></code></pre></td></tr></table></figure></li><li><p>ä¹‹åå†åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨@PropertySourceå±æ€§ï¼Œå°†å¤–éƒ¨çš„é…ç½®æ–‡ä»¶æ‰«æåˆ°ã€‚</p></li><li>æœ€åï¼Œä¾¿å¯ä»¥ä½¿ç”¨${}è·å–é…ç½®æ–‡ä»¶çš„å€¼ã€‚</li></ul><p>æµ‹è¯•ä»£ç å¦‚ä¸‹</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PropertyTest</span> </span>&#123;<br>    AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfproperty.class);<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        showBeanNames(context);<br>        Person person = (Person) context.getBean(<span class="hljs-string">"person"</span>);<br>        System.out.println(person);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showBeanNames</span><span class="hljs-params">(ApplicationContext context)</span></span>&#123;<br>        String[] names = context.getBeanDefinitionNames();<br>        <span class="hljs-keyword">for</span> (String name : names) &#123;<br>            System.out.println(name);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528154531.png" alt="æµ‹è¯•ç»“æœ"></p><p>ç»“æœå¯ä»¥çœ‹åˆ°age=20,name=â€™zhangsanâ€™,nickNmae=â€™xiaolisiâ€™ä¸æ³¨å…¥çš„å±æ€§å€¼ç›¸ç¬¦ã€‚</p><h3 id="2-è‡ªåŠ¨è£…é…"><a href="#2-è‡ªåŠ¨è£…é…" class="headerlink" title="2.è‡ªåŠ¨è£…é…"></a>2.è‡ªåŠ¨è£…é…</h3><h4 id="2-1-Autowiredæ³¨è§£"><a href="#2-1-Autowiredæ³¨è§£" class="headerlink" title="2.1 @Autowiredæ³¨è§£"></a>2.1 @Autowiredæ³¨è§£</h4><p>åœ¨ä¸€èˆ¬çš„webé¡¹ç›®ï¼Œå­˜åœ¨controllerå±‚ã€serviceå±‚ã€daoå±‚ï¼Œåœ¨ä½¿ç”¨serviceå±‚æ—¶éœ€è¦è°ƒç”¨daoå±‚çš„æ–¹æ³•ï¼Œä½¿ç”¨controllerå±‚æ—¶éœ€è¦è°ƒç”¨serviceå±‚çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨å½“å‰çš„ç±»ä¸­ä¸åˆ›å»ºè°ƒç”¨ç±»çš„å®ä¾‹ã€‚è¿™æ—¶@Autowiredæ³¨è§£å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookService</span> </span>&#123;<br>     <span class="hljs-meta">@Autowired</span><br>     BookDao bookDao2;<br>     <span class="hljs-meta">@Override</span><br>     <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-string">"BookService&#123;"</span> +<br>                 <span class="hljs-string">"bookDao="</span> + bookDao2 +<br>                 <span class="hljs-string">'&#125;'</span>;<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸ºï¼Œåœ¨BookServiceç±»ä¸­éœ€è¦æ³¨å…¥BookDaoï¼ŒåŠ ä¸Š@Autowiredæ³¨è§£ä¾¿å¯ä»¥å°†BookDaoå±æ€§åŠ è½½ã€‚å°†ä¸Šè¿°ä»£ç è¿›è¡Œæµ‹è¯•</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutowiredTest</span> </span>&#123;<br>    AnnotationConfigApplicationContext context = <br>    <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfAutowired.class);<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span></span>&#123;<br>        BookService bookService = context.getBean(BookService.class);<br>        System.out.println(bookService);<br>        BookDao bookDao = context.getBean(BookDao.class);<br>        System.out.println(bookDao);  <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528160946.png" alt="æµ‹è¯•ç»“æœ"></p><p>ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨BookServiceä¸­æ³¨å…¥çš„BookDaoä¸beanå®¹å™¨ä¸­çš„BookDaoæ˜¯åŒä¸€ä¸ªã€‚<br>@Autowiredæ³¨è§£åœ¨æ³¨å…¥å®¹å™¨ä¸­çš„å±æ€§æ—¶ï¼Œé¦–å…ˆä¼šæŒ‰ç…§ç±»å‹å»å®¹å™¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ã€‚å‡å¦‚@Autowiredæ³¨è§£åœ¨æ³¨å…¥å®¹å™¨ä¸­çš„å±æ€§æ—¶ï¼Œé¦–å…ˆä¼šæŒ‰ç…§ç±»å‹å»å®¹å™¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ã€‚å‡å¦‚@Autowiredæ ‡æ³¨åœ¨BookDao bookDao2ä¸Šï¼Œé¦–å…ˆå®ƒä¼šå»æ‰¾å®¹å™¨ä¸­ç±»å‹ä¸ºBookDaoçš„ç»„ä»¶ï¼Œå¦‚æœå®¹å™¨ä¸­æœ‰å¤šä¸ªBookDaoçš„ç»„ä»¶ï¼Œåˆ™å†æ ¹æ®å±æ€§åä½œä¸ºç»„ä»¶idå»å®¹å™¨ä¸­æ‰¾ï¼Œå¦‚æ­¤æ—¶çš„å±æ€§åä¸ºbookDao2ï¼Œåˆ™å»å®¹å™¨ä¸­å¯»æ‰¾idåä¸ºbookDao2çš„ç»„ä»¶ã€‚</p><p>é¦–å…ˆï¼Œå®¹å™¨ä¸­æœ‰ä¸€ä¸ªbookDaoï¼Œå°†å…¶æ ‡è®°ä¸ºâ€œ1â€<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookDao</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String tag = <span class="hljs-string">"1"</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getTag</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> tag;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTag</span><span class="hljs-params">(String tag)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.tag = tag;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"BookDao&#123;"</span> +<br>                <span class="hljs-string">"tag='"</span> + tag + <span class="hljs-string">'\''</span> +<br>                <span class="hljs-string">'&#125;'</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>å†åœ¨é…ç½®ç±»ä¸­æ³¨å…¥ä¸€ä¸ªBookDaoçš„ç»„ä»¶ï¼Œå°†å…¶å‘½åä¸ºbookDao2ï¼Œå¹¶æ ‡è®°ä¸ºâ€œ2â€</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span>(<span class="hljs-string">"bookDao2"</span>)<br><span class="hljs-function"><span class="hljs-keyword">public</span> BookDao <span class="hljs-title">bookDao</span><span class="hljs-params">()</span></span>&#123;<br>    BookDao bookDao = <span class="hljs-keyword">new</span> BookDao();<br>    bookDao.setTag(<span class="hljs-string">"2"</span>);<br>    <span class="hljs-keyword">return</span> bookDao;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç è‡ªåŠ¨è£…é…çš„BookDaoå‘½åä¸ºbookDao2;</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528162335.png" alt="æµ‹è¯•ç»“æœ"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒBookServiceè‡ªåŠ¨è£…é…çš„BookDaoä¸ºbookDao2ã€‚</p><p>é™¤äº†æŒ‰ç…§idï¼Œspringä¹Ÿæœ‰@Qualifieræ³¨è§£ï¼ŒæŒ‡å®šéœ€è¦è£…é…çš„ç»„ä»¶çš„idã€‚@Qualifier(â€œbookDaoâ€)ï¼Œè¡¨æ˜éœ€è¦è£…é…idä¸ºbookDaoçš„ç»„ä»¶ã€‚</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528162727.png" alt="æµ‹è¯•ç»“æœ"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒBookServiceè‡ªåŠ¨è£…é…çš„BookDaoä¸ºbookDaoï¼Œå› ä¸ºå…¶tagçš„å±æ€§ä¸ºâ€œ1â€ã€‚</p><p>springçš„é»˜è®¤è§„å®šè‡ªåŠ¨è£…é…çš„ç»„ä»¶ä¸€å®šè¦å°†å±æ€§èµ‹å€¼å¥½ï¼Œæ²¡æœ‰å°±æŠ¥é”™ã€‚å°†@Qualifieré‡Œçš„å±æ€§æ”¹ä¸º@Qualifier(â€œbookDao3â€)ï¼Œåœ¨æ²¡æœ‰bookDao3çš„æƒ…å†µä¸‹ä¼šæŠ¥é”™ã€‚</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528163304.png" alt="æŠ¥é”™ä¿¡æ¯"></p><p>ä»æŠ¥é”™å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯å› ä¸ºæ‰¾ä¸åˆ°bookDao3è€Œå‡ºé”™</p><p>è¿™æ˜¯å› ä¸º@Autowiredä¸­æœ‰ä¸€ä¸ªrequiredå±æ€§ï¼Œå…¶å±æ€§é»˜è®¤å€¼ä¸ºtrueï¼Œå³è‡ªåŠ¨è£…é…çš„å€¼å¿…é¡»è¦èµ‹å€¼å¥½ï¼Œå½“å°†å…¶æ”¹ä¸ºfalseæ—¶ï¼Œæ²¡æœ‰èµ‹å€¼ä¹Ÿä¸æŠ¥é”™ï¼Œ    @Autowired(required = false)ã€‚</p><p><img src="/2019/05/28/spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…/QQæˆªå›¾20190528163600.png" alt="æµ‹è¯•ç»“æœ"></p><p>è‡ªåŠ¨è£…é…è¿˜æœ‰ä¸€ä¸ª@Primaryæ³¨è§£ï¼Œå³åœ¨è‡ªåŠ¨è£…é…æ—¶ä½¿ç”¨æœ‰@Primaryæ³¨è§£çš„Beanï¼Œä½†æ˜¯ä½¿ç”¨@Qualifieråï¼Œä¼šä½¿ç”¨@QualifieræŒ‡å®šidçš„beanã€‚</p><h4 id="2-2-Resourceæ³¨è§£ï¼Œ-Injectæ³¨è§£"><a href="#2-2-Resourceæ³¨è§£ï¼Œ-Injectæ³¨è§£" class="headerlink" title="2.2 @Resourceæ³¨è§£ï¼Œ@Injectæ³¨è§£"></a>2.2 @Resourceæ³¨è§£ï¼Œ@Injectæ³¨è§£</h4><p>@Resourceå’Œ@Injectæ³¨è§£æ˜¯Javaè§„èŒƒçš„æ³¨è§£ï¼Œä¸@Autowiredä¸€æ ·å®ç°è‡ªåŠ¨è£…é…ã€‚</p><ul><li>@Resourceæ³¨è§£åªæœ‰ä¸€ä¸ªnameå±æ€§ï¼ŒæŒ‡å®šè·å–çš„ç»„ä»¶çš„idï¼Œé™¤æ­¤ä¹‹å¤–ä¸æ”¯æŒå…¶ä»–çš„åŠŸèƒ½</li><li>@Injectæ³¨è§£éœ€è¦åœ¨mavenä¸­å¯¼å…¥ç›¸å…³çš„ä¾èµ–ï¼Œé™¤äº†æ²¡æœ‰requiredçš„å±æ€§ï¼Œå…¶ä½™éƒ½å’Œ@Autowiredä¸€æ ·ä½¿ç”¨ã€‚</li></ul><h4 id="2-3-Autowiredæ ‡æ³¨ä½ç½®"><a href="#2-3-Autowiredæ ‡æ³¨ä½ç½®" class="headerlink" title="2.3 @Autowiredæ ‡æ³¨ä½ç½®"></a>2.3 @Autowiredæ ‡æ³¨ä½ç½®</h4><ul><li>å±æ€§ä¸Šå°±å¦‚ä¸Šæ‰€è¿°</li><li>set***()æ–¹æ³•ä¸Š</li><li>æ ‡åœ¨æœ‰å‚æ„é€ å™¨ä¸Š</li><li>æ ‡åœ¨å‚æ•°ä½ç½®ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨æ—¶ï¼Œ@Autowiredæ³¨è§£å¯ä»¥çœç•¥ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œè‡ªåŠ¨è£…é…</li><li>ä½¿ç”¨@Beanæ³¨è§£åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ–¹æ³•çš„å‚æ•°ä»å®¹å™¨ä¸­è·å¾—<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Color <span class="hljs-title">color</span><span class="hljs-params">(Car car)</span></span>&#123;<br>        Color color = <span class="hljs-keyword">new</span> Color();<br>        color.setCar(car);<br>        <span class="hljs-keyword">return</span> color;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-4-è‡ªå®šä¹‰ç»„ä»¶"><a href="#2-4-è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="2.4 è‡ªå®šä¹‰ç»„ä»¶"></a>2.4 è‡ªå®šä¹‰ç»„ä»¶</h4><p>springå®¹å™¨çš„åº•å±‚ç»„ä»¶éƒ½éœ€è¦å®ç°Awareæ¥å£ï¼Œè¿™æ˜¯ä¸€ä¸ªæ€»æ¥å£ï¼Œå…¶ä¸­è¿˜æœ‰å¾ˆå¤šå­æ¥å£ï¼Œå½“å®ç°å­æ¥å£ä¸”é‡å†™å…¶æ–¹æ³•ï¼Œä¾¿å¯ä»¥è‡ªå®šä¹‰ç»„ä»¶ã€‚<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Red</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ApplicationContextAware</span>, <span class="hljs-title">BeanNameAware</span>, <span class="hljs-title">EmbeddedValueResolverAware</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setApplicationContext</span><span class="hljs-params">(ApplicationContext applicationContext)</span> <span class="hljs-keyword">throws</span> BeansException </span>&#123;<br>        System.out.println(<span class="hljs-string">"Ioc:"</span>+applicationContext);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBeanName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">"Name:"</span>+name);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setEmbeddedValueResolver</span><span class="hljs-params">(StringValueResolver resolver)</span> </span>&#123;<br>        String value = resolver.resolveStringValue(<span class="hljs-string">"$&#123;os.name&#125;"</span>+ <span class="hljs-string">"....."</span> + <span class="hljs-string">"#&#123;10*2&#125;"</span>);<br>        System.out.println(value);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>ä¸Šè¿°ä»£ç ä¸­ApplicationContextAwareå¯ä»¥å®ç°Iocå®¹å™¨çš„åˆ›å»ºï¼ŒBeanNameAwareæ¥å£å¯ä»¥å¾—åˆ°Beançš„nameï¼ŒEmbeddedValueResolverAwareæ¥å£å¯ä»¥è§£æç›¸åº”çš„è¡¨è¾¾å¼ï¼Œå¦‚SPLEè¡¨è¾¾å¼ã€‚</p><h4 id="2-5-Profileç¯å¢ƒæ­å»º"><a href="#2-5-Profileç¯å¢ƒæ­å»º" class="headerlink" title="2.5 @Profileç¯å¢ƒæ­å»º"></a>2.5 @Profileç¯å¢ƒæ­å»º</h4><p>springå¯ä»¥æ ¹æ®å½“å‰çš„ç¯å¢ƒï¼ŒåŠ¨æ€æ¿€æ´»ä¸åˆ‡æ¢ç»„ä»¶ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨@Profileï¼Œæ­¤æ³¨è§£çš„é»˜è®¤å€¼æ—¶defaultç¯å¢ƒã€‚</p><p>ç¯å¢ƒçš„æ”¹å˜</p><ul><li>å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼Œå°†å…¶æ”¹ä¸º-Dspring.profiles.active=***ï¼Œå…¶ä¸­ç­‰å¼åé¢çš„å€¼ä¸ºå…·ä½“çš„ç¯å¢ƒã€‚</li><li>ä¹Ÿå¯ä»¥åœ¨ä¸è¯¥å˜å‘½ä»¤è¡Œçš„å‰æä¸‹ä½¿ç”¨AnnotationConfigApplicationContextçš„æ— å‚æ„é€ å™¨ï¼Œåœ¨æ³¨å†Œé…ç½®ç±»ä¹‹å‰ï¼Œæ”¹å˜å…¶ç¯å¢ƒï¼Œä½¿ç”¨.getEnvironment().setActiveProfiles()æ–¹æ³•ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&quot;&gt;&lt;a href=&quot;#spring-å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&quot; class=&quot;headerlink&quot; title=&quot;spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&quot;&gt;&lt;/a&gt;spring_å±æ€§èµ‹å€¼ä¸è‡ªåŠ¨è£…é…&lt;/h2&gt;&lt;h3 id=&quot;1-å±æ€§èµ‹å€¼&quot;&gt;&lt;a href=&quot;#1-å±æ€§èµ‹å€¼&quot; class=&quot;headerlink&quot; title=&quot;1.å±æ€§èµ‹å€¼&quot;&gt;&lt;/a&gt;1.å±æ€§èµ‹å€¼&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨@valueæ³¨è§£ä¾¿å¯ä»¥ä½¿å®¹å™¨ä¸­çš„å±æ€§è¿›è¡Œèµ‹å€¼&lt;/p&gt;
&lt;figure class=&quot;hljs highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Person&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;br&gt;    &lt;span class=&quot;hljs-meta&quot;&gt;@Value&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;#&amp;#123;22-2&amp;#125;&quot;&lt;/span&gt;)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; age;&lt;br&gt;    &lt;span class=&quot;hljs-meta&quot;&gt;@Value&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;zhangsan&quot;&lt;/span&gt;)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String name;&lt;br&gt;    &lt;span class=&quot;hljs-meta&quot;&gt;@Value&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;$&amp;#123;person.nickNmae&amp;#125;&quot;&lt;/span&gt;)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String nickNmae;&lt;br&gt;    &lt;span class=&quot;hljs-comment&quot;&gt;//get()ã€set()æ–¹æ³•&lt;/span&gt;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>spring_Beançš„ç”Ÿå‘½å‘¨æœŸ</title>
    <link href="http://yoursite.com/2019/05/26/spring-Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    <id>http://yoursite.com/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/</id>
    <published>2019-05-26T07:18:39.000Z</published>
    <updated>2019-05-28T07:53:00.839Z</updated>
    
    <content type="html"><![CDATA[<h2 id="springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£"><a href="#springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£" class="headerlink" title="springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£"></a>springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£</h2><p>åˆè¯†Beançš„ç”Ÿå‘½å‘¨æœŸï¼šBeanå®¹å™¨çš„åˆ›å»ºâ€”&gt;åˆå§‹åŒ–Beanâ€”-&gt;Beanå®¹å™¨çš„é”€æ¯</p><ul><li>åœ¨xmlä¸­å®šä¹‰init-methodå’Œdestroy-methodå±æ€§ï¼Œå°±å¯ä»¥å®šä¹‰åˆå§‹åŒ–ä¸é”€æ¯æ–¹æ³•</li><li>åœ¨æ³¨è§£æ¨¡å¼ä¸‹æœ‰ä¸‰ç§æ–¹æ³•</li></ul><a id="more"></a><p>####1.ç¬¬ä¸€ç§<br>åœ¨@Beanä¸­æŒ‡å®šinitMethodä¸destroyMethodå±æ€§<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ComponentScan</span>(<span class="hljs-string">"cn.hdu.bean"</span>)<br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfigOfLife</span> </span>&#123;<br><span class="hljs-meta">@Bean</span>(value = <span class="hljs-string">"car"</span>, initMethod = <span class="hljs-string">"init"</span>, destroyMethod = <span class="hljs-string">"destroy"</span>)<br><span class="hljs-function"><span class="hljs-keyword">public</span> Car <span class="hljs-title">car</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Car();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>åœ¨å¯¹åº”çš„Carç±»ä¸­ç¼–å†™ç›¸åº”çš„initæ–¹æ³•ä¸destroyæ–¹æ³•<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span><br></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Car</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">"car..æ„é€ å™¨å¯åŠ¨"</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"caråˆå§‹åŒ–....."</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"caré”€æ¯....."</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>æµ‹è¯•ä»£ç å¦‚ä¸‹<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LifeTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfigOfLife.class);<br>        System.out.println(<span class="hljs-string">"å®¹å™¨åˆ›å»º"</span>);<br>        context.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>é¦–å…ˆnewä¸€ä¸ªå®¹å™¨ï¼Œæ‰“å°ï¼Œå…³é—­å®¹å™¨<br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526153517.png" alt="æµ‹è¯•ä»£ç ç»“æœ"><br>ä»ç»“æœçœ‹ï¼Œé¦–å…ˆåˆ›å»ºå¥½çš„å®¹å™¨ä¼šæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œæ¥ç€åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åœ¨Beançš„åˆ›å»ºä¸å±æ€§èµ‹å€¼ä¹‹åï¼Œå†å®ç°æµ‹è¯•ä»£ç ä¸­çš„è¾“å‡ºè¯­å¥ï¼Œæœ€åå®¹å™¨å…³é—­åBeanè¢«é”€æ¯<br>ä½†æ˜¯ï¼Œå½“åˆ›å»ºçš„Beanä¸ºå¤šä¾‹æ¨¡å¼ï¼Œåˆ™æœ‰å·®å¼‚ï¼Œå†é…ç½®ç±»çš„@Beanæ³¨è§£ä¸ŠåŠ å…¥@Scope(â€œprototypeâ€)æ³¨è§£ï¼Œå…¶ç»“æœä¸º<br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526153959.png" alt="å¤šä¾‹ç»“æœ"><br>åœ¨å¤šä¾‹æ¨¡å¼ä¸‹åˆ›å»ºå®¹å™¨æ—¶ï¼Œä¸æ‰§è¡Œå¯¹beançš„æ„é€ ä¸åˆå§‹åŒ–ï¼Œåœ¨å…³é—­å®¹å™¨çš„æ—¶å€™éƒ¨é”€æ¯Beanï¼Œå¤šä¾‹æ¨¡å¼ä¸‹åªæœ‰åœ¨è·å–åˆ°Beançš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œæ„é€ å’Œåˆå§‹åŒ–ï¼Œä½†æ˜¯ä¸ä¼šé”€æ¯ã€‚<br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526154227.png" alt="å¤šä¾‹è·å–Beançš„ç»“æœ"></p><p>####2.ç¬¬äºŒç§<br>é€šè¿‡å®ç°InitializingBeanæ¥å£å®Œæˆåˆå§‹åŒ–,å®ç°DisposableBeanæ¥å£å®ç°é”€æ¯<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cat</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InitializingBean</span>,<span class="hljs-title">DisposableBean</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Cat</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"cat..æ„é€ å™¨å¯åŠ¨"</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        System.out.println(<span class="hljs-string">"caté”€æ¯....."</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterPropertiesSet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        System.out.println(<span class="hljs-string">"catåˆå§‹åŒ–....."</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>####3.ç¬¬ä¸‰ç§<br>ç”±JSR250è§„èŒƒï¼Œåœ¨æ–¹æ³•ä½ç½®æ³¨æ˜@PostConstructä¸@PreDestroyæ³¨è§£ä¹Ÿå¯ä»¥å®ç°åˆå§‹åŒ–ä¸é”€æ¯<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Dog</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">"Dogæ„é€ å‡½æ•°....."</span>);<br>    &#125;<br>    <span class="hljs-meta">@PostConstruct</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"Dogåˆå§‹åŒ–......"</span>);<br>    &#125;<br>    <span class="hljs-meta">@PreDestroy</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">"Dogé”€æ¯......."</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><hr><p>Beançš„ç”Ÿå‘½å‘¨æœŸåœ¨åˆå§‹åŒ–å‰åè¿˜å¯ä»¥æ‰§è¡Œè‡ªå®šä¹‰çš„é€»è¾‘ï¼Œéœ€è¦å®ç°BeanPostProcessoræ¥å£ï¼ŒBeanPostProcessoræ¥å£éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼ŒpostProcessBeforeInitializationæ–¹æ³•ä¸postProcessAfterInitializationæ–¹æ³•ã€‚<br>postProcessBeforeInitializationæ–¹æ³•åœ¨Beanåˆå§‹åŒ–å‰æ‰§è¡Œï¼ŒpostProcessAfterInitializationæ–¹æ³•åœ¨Beanåˆå§‹åŒ–åæ‰§è¡Œã€‚<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBeanPostProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanPostProcessor</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException </span>&#123;<br>        System.out.println(<span class="hljs-string">"åˆå§‹åŒ–ä¹‹å‰"</span> + beanName +<span class="hljs-string">"........."</span>+ bean);<br>        <span class="hljs-keyword">return</span> bean;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">postProcessAfterInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException </span>&#123;<br>        System.out.println(<span class="hljs-string">"åˆå§‹åŒ–ä¹‹å"</span> + beanName +<span class="hljs-string">"........."</span>+ bean);<br>        <span class="hljs-keyword">return</span> bean;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526155632.png" alt="BeanPostProcessorä»£ç ç»“æœ"></p><p><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526161012.png" alt="é€šè¿‡å¯¹ä»£ç è¿›è¡Œdebugï¼Œå¯ä»¥å‘ç°å…¶initializeBeanæ–¹æ³•"><br>åœ¨initializeBeanæ–¹æ³•ä¹‹å‰æœ‰populateBean()æ–¹æ³•ï¼ŒæŸ¥çœ‹æºç ä¼šå‘ç°ï¼Œæ­¤æ–¹æ³•ä¸ºBeanèµ‹äºˆå±æ€§<br>è¿›å…¥initializeBeanæ–¹æ³•æºç <br><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526161347.png" alt="invokeInitMethodsæ–¹æ³•å‰ä¼šè°ƒç”¨applyBeanPostProcessorsBeforeInitializationæ–¹æ³•"></p><p><img src="/2019/05/26/spring-Beançš„ç”Ÿå‘½å‘¨æœŸ/QQæˆªå›¾20190526161520.png" alt="invokeInitMethodsæ–¹æ³•åä¼šè°ƒç”¨applyBeanPostProcessorsAfterInitializationæ–¹æ³•"></p><p>Beançš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸä¸ºï¼šå®¹å™¨çš„åˆ›å»ºâ€”&gt;å®ç°æ„é€ å‡½æ•°â€”&gt;åˆå§‹åŒ–å‰çš„å¤„ç†â€”&gt;Beanåˆå§‹åŒ–â€”&gt;åˆå§‹åŒ–åçš„å¤„ç†â€”&gt;Beançš„é”€æ¯</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&quot;&gt;&lt;a href=&quot;#springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&quot; class=&quot;headerlink&quot; title=&quot;springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&quot;&gt;&lt;/a&gt;springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸçš„äº†è§£&lt;/h2&gt;&lt;p&gt;åˆè¯†Beançš„ç”Ÿå‘½å‘¨æœŸï¼šBeanå®¹å™¨çš„åˆ›å»ºâ€”&amp;gt;åˆå§‹åŒ–Beanâ€”-&amp;gt;Beanå®¹å™¨çš„é”€æ¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨xmlä¸­å®šä¹‰init-methodå’Œdestroy-methodå±æ€§ï¼Œå°±å¯ä»¥å®šä¹‰åˆå§‹åŒ–ä¸é”€æ¯æ–¹æ³•&lt;/li&gt;
&lt;li&gt;åœ¨æ³¨è§£æ¨¡å¼ä¸‹æœ‰ä¸‰ç§æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>springç»„ä»¶æ³¨å†Œ</title>
    <link href="http://yoursite.com/2019/05/25/spring%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C/"/>
    <id>http://yoursite.com/2019/05/25/springç»„ä»¶æ³¨å†Œ/</id>
    <published>2019-05-25T13:29:39.000Z</published>
    <updated>2019-05-29T05:37:31.212Z</updated>
    
    <content type="html"><![CDATA[<h4 id="springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI"><a href="#springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI" class="headerlink" title="springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI"></a>springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI</h4><p>1.åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ä¼šåˆ›å»ºä¸€ä¸ªxmlæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªbeanï¼Œå¦‚ä¸‹ï¼š<br><figure class="hljs highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"people"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cn.hdu.bean.Person"</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"lisi"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"22"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure></p><a id="more"></a><p>ä½¿ç”¨xmlä½¿å¾—å¼€å‘å¾ˆç¹çã€‚å› æ­¤ï¼Œè®¸å¤šäººä¼šç”¨æ³¨è§£å¼€å‘ä»£æ›¿ä¼ ç»Ÿçš„xmlå¼€å‘ã€‚é‚£ä¹ˆåœ¨æ³¨è§£å¼€å‘æ—¶ï¼Œéœ€è¦å®Œæˆä¸Šè¿°çš„beanæ³¨å…¥éœ€è¦æ€ä¹ˆåšå‘¢?</p><ul><li>éœ€è¦å†™é…ç½®ç±»ï¼Œåœ¨ä¸€ä¸ªclassæ–‡ä»¶ä¸Šæ ‡æ³¨@configration</li><li>åœ¨ç±»ä¸­å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•è¿”å›å€¼ä¸ºæ³¨å…¥beançš„ç±»å‹</li><li>æ–¹æ³•ä¸Šå¯ä»¥åŠ @bean(value = â€œ***â€)æ³¨è§£,valueçš„å±æ€§æ˜¯æ­¤beançš„nameï¼Œç±»æ¯”ä¸ºxmlä¸­çš„idå±æ€§<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span>(<span class="hljs-string">"person"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">person</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(<span class="hljs-number">22</span>, <span class="hljs-string">"lisi"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>æœ€åå°†æµ‹è¯•è¯æ˜ï¼Œxmlä¸æ³¨è§£å¾—åˆ°çš„beanä¸€æ ·<br>xmlæµ‹è¯•ä»£ç ï¼š<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IOCTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test0</span><span class="hljs-params">()</span></span>&#123;<br>        ClassPathXmlApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"src/main/resource/bean.xml"</span>);<br>        Person person = (Person) context.getBean(<span class="hljs-string">"person"</span>);<br>        System.out.println(person);<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190525213128.png" alt="xmlæµ‹è¯•ç»“æœ"><br>æ³¨è§£æµ‹è¯•ä»£ç ï¼š<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IOCTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>            AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MainConfig.class);<br>            Object person = context.getBean(<span class="hljs-string">"person"</span>);<br>            System.out.println(person);<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>AnnotationConfigApplicationContextç±»å¯ä»¥å¾—åˆ°ç”±@Configurationæ³¨è§£çš„ç±»ã€‚<br><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190525214624.png" alt="æ³¨è§£æµ‹è¯•ç»“æœ"></p><p>2.åŒ…æ‰«æ<br>åœ¨ä¼ ç»Ÿçš„xmlå¼€å‘æ¨¡å¼ä¸­<br><figure class="hljs highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"cn.hdu"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></table></figure></p><ul><li>ä½¿ç”¨æ³¨è§£å¯ä»¥åœ¨configç±»ä¸ŠåŠ @ComponentScan(value=â€cn.hduâ€),valueä¸­çš„å†…å®¹ä¸ºéœ€è¦æ‰«æçš„åŒ…ï¼Œåœ¨è¿™å†™åŒ…ä¸Šï¼Œåªè¦å­˜åœ¨classæ–‡ä»¶ä¸Šæœ‰@Controllerã€@@Repositoryã€@Serviceã€@Componentæ³¨è§£ï¼Œä¾¿å¯ä»¥ä½¿ç”¨æ­¤æ‰«æåˆ°ã€‚</li><li>åœ¨ä¸€èˆ¬çš„é¡¹ç›®ä¸­ï¼Œå­˜åœ¨controllerå±‚ï¼Œserviceå±‚daoå±‚ï¼Œåœ¨è¿™ä¸‰ä¸ªåŒ…çš„ç±»ä¸­åŠ ä¸Š@@Repositoryã€@Serviceã€@Controlleræ³¨è§£<br><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190526124559.png" alt="å„ä¸ªç±»çš„åˆ†å¸ƒ"><br>é…ç½®ç±»çš„ä»£ç <figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ComponentScan</span>(value = <span class="hljs-string">"cn.hdu"</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span>(<span class="hljs-string">"person"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">person</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(<span class="hljs-number">17</span>, <span class="hljs-string">"lisi"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>æµ‹è¯•ç±»çš„ä»£ç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IOCTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>        AnnotationConfigApplicationContext context = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MainConfig.class);<br>        String[] names = context.getBeanDefinitionNames();<br>        <span class="hljs-keyword">for</span> (String name : names) &#123;<br>            System.out.println(name);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>getBeanDefinitionNames()æ–¹æ³•å¯ä»¥å¾—åˆ°å·²ç»åˆ›å»ºçš„beançš„åå­—ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚<br><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190526125117.png" alt="åŒ…æ‰«é¢æ³¨è§£æµ‹è¯•ç»“æœ"><br>é™¤å´springè‡ªå·±éœ€è¦çš„å®¹å™¨ï¼Œè¿˜æ‰«æåˆ°äº†mainConfigã€bookControllerã€bookDaoã€bookServiceã€personï¼Œå…¶ä¸­æ‰«é¢åˆ°mainConfigè¿™ä¸ªé…ç½®ç±»æ˜¯å› ä¸º@Configurationæ³¨è§£ï¼Œ@Configurationæ³¨è§£çš„æºç ä¸º<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target</span>(ElementType.TYPE)<br><span class="hljs-meta">@Retention</span>(RetentionPolicy.RUNTIME)<br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Configuration &#123;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>@Configurationæ³¨è§£ä¸Šæœ‰@Componentæ³¨è§£ï¼Œè€Œ@ComponentScanæ³¨è§£æ˜¯å¯ä»¥æ‰«æåˆ°æ³¨æœ‰@Componentæ³¨è§£çš„ç±»<br>å¾—åˆ°personæ˜¯å› ä¸ºæœ‰@Beanæ³¨è§£ã€‚</p><ul><li>@ComponentScanæ³¨è§£é™¤äº†æœ‰valueå±æ€§ï¼Œè¿˜æœ‰excludeFiltersä¸includeFiltersï¼Œå½“è®¾ç½®äº†åé¢çš„å±æ€§ï¼Œæ­¤æ³¨è§£æ‰«æåˆ°çš„åŒ…å¯ä»¥ç”±è‡ªå·±å®šåˆ¶<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Filter[] excludeFilters() <span class="hljs-keyword">default</span> &#123;&#125;;<br>Filter[] includeFilters() <span class="hljs-keyword">default</span> &#123;&#125;;<br></code></pre></td></tr></table></figure></li></ul><p>è¿™ä¸¤ä¸ªå±æ€§éƒ½éœ€è¦Filteræ•°ç»„ï¼ŒæŸ¥çœ‹Filteræºç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@interface</span> Filter &#123;<br><br><span class="hljs-comment">/**<br> * The type of filter to use.<br> * &lt;p&gt;Default is &#123;<span class="hljs-doctag">@link</span> FilterType#ANNOTATION&#125;.<br> * <span class="hljs-doctag">@see</span> #classes<br> * <span class="hljs-doctag">@see</span> #pattern<br> */</span><br><span class="hljs-function">FilterType <span class="hljs-title">type</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> FilterType.ANNOTATION</span>;<br><span class="hljs-comment">/**<br> * Alias for &#123;<span class="hljs-doctag">@link</span> #classes&#125;.<br> * <span class="hljs-doctag">@see</span> #classes<br> */</span><br><span class="hljs-meta">@AliasFor</span>(<span class="hljs-string">"classes"</span>)<br>Class&lt;?&gt;[] value() <span class="hljs-keyword">default</span> &#123;&#125;;<br></code></pre></td></tr></table></figure></p><p>é…ç½®Filterï¼Œéœ€è¦FilterTypeä¸Class&lt;?&gt;[]ï¼ŒClass&lt;?&gt;[]ä¸ºéœ€è¦è¿‡æ»¤çš„ç±»çš„.classå±æ€§ï¼ŒæŸ¥çœ‹FilterTypeæºç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> FilterType &#123;<br><br><span class="hljs-comment">/**<br> * Filter candidates marked with a given annotation.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.AnnotationTypeFilter<br> */</span><br>ANNOTATION,<br><span class="hljs-comment">/**<br> * Filter candidates assignable to a given type.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.AssignableTypeFilter<br> */</span><br>ASSIGNABLE_TYPE,<br><span class="hljs-comment">/**<br> * Filter candidates matching a given AspectJ type pattern expression.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.AspectJTypeFilter<br> */</span><br>ASPECTJ,<br><span class="hljs-comment">/**<br> * Filter candidates matching a given regex pattern.<br> * <span class="hljs-doctag">@see</span> org.springframework.core.type.filter.RegexPatternTypeFilter<br> */</span><br>REGEX,<br><span class="hljs-comment">/** Filter candidates using a given custom<br> * &#123;<span class="hljs-doctag">@link</span> org.springframework.core.type.filter.TypeFilter&#125; implementation.<br> */</span><br>CUSTOM<br>&#125;<br></code></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹å‡ºFilterTypeæœ‰5ä¸ªå±æ€§ï¼Œä¸ºANNOTATIONï¼ŒASSIGNABLE_TYPE,ASPECTJ,REGEX,CUSTOM</p><ul><li>ANNOTATIONä¸ºæŒ‰ç…§æ³¨è§£è¿‡æ»¤</li><li>ASSIGNABLE_TYPEä¸ºæŒ‰ç…§ç±»å‹è¿‡æ»¤</li><li>ASPECTJ,REGEXä¸ºæŒ‰è¡¨è¾¾å¼è¿‡æ»¤</li><li>CUSTOMæ˜¯è‡ªå®šä¹‰<br>ä¸¾ä¾‹typeä¸ºANNOTATIONï¼Œå…¶ä»£ç ä¸º<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ComponentScan</span>(value = <span class="hljs-string">"cn.hdu"</span>, excludeFilters = &#123;<br>        <span class="hljs-meta">@ComponentScan</span>.Filter(type = FilterType.ANNOTATION, classes = &#123;<br>                Controller.class, Service.class<br>        &#125;)<br>&#125;)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainConfig</span> </span>&#123;<br>    <span class="hljs-meta">@Bean</span>(<span class="hljs-string">"person"</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">person</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-comment">//        System.out.println("start.......");</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(<span class="hljs-number">17</span>, <span class="hljs-string">"lisi"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p><img src="/2019/05/25/springç»„ä»¶æ³¨å†Œ/QQæˆªå›¾20190526131830.png" alt="ä½¿ç”¨excludeFiltersçš„æµ‹è¯•ç»“æœ"><br>å¯ä»¥å‘ç°Controlleryä¸Serviceçš„å®¹å™¨ä¸è§äº†ï¼Œè¿™æ˜¯å› ä¸ºexcludeFilterså±æ€§èµ·ä½œç”¨äº†</p><ul><li>å½“typeä¸ºCUSTOMæ—¶ï¼ŒæŸ¥çœ‹CUSTOMå¯ä»¥å‘ç°@link org.springframework.core.type.filter.TypeFilter} implementation.æ³¨é‡Šï¼Œå³ä¸ºéœ€è¦å®ç°TypeFilterçš„æ¥å£ï¼Œå…¶ä»£ç å¦‚ä¸‹<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTypeFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TypeFilter</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">match</span><span class="hljs-params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>            AnnotationMetadata annotationMetadata = metadataReader.getAnnotationMetadata();<br>            ClassMetadata classMetadata = metadataReader.getClassMetadata();<br>            Resource resource = metadataReader.getResource();<br>            String className = classMetadata.getClassName();<br>            System.out.println(className);<br>            <span class="hljs-keyword">if</span>(className.contains(<span class="hljs-string">"er"</span>))<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>å…¶è¦å®ç°çš„æ–¹æ³•ä¸ºmatch(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå‚æ•°</p><ul><li><p>metadataReaderå‚æ•°ï¼Œå…¶æ–¹æ³•æœ‰</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MetadataReader</span> </span>&#123;<br>    <span class="hljs-function">Resource <span class="hljs-title">getResource</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">ClassMetadata <span class="hljs-title">getClassMetadata</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">AnnotationMetadata <span class="hljs-title">getAnnotationMetadata</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>metadataReaderFactoryå‚æ•°ä¸ºä¸€ä¸ªmetadataReaderå·¥å‚ï¼Œå¯ä»¥ç”±å·¥å‚å¾—åˆ°metadataReaderå‚æ•°</p></li></ul><p>3.ä½œç”¨åŸŸä¸æ‡’åŠ è½½</p><ul><li>ä½œç”¨åŸŸ @Scopeæ³¨è§£  å…¶å±æ€§æœ‰SCOPE_PROTOTYPEï¼ŒSCOPE_SINGLETONï¼ŒSCOPE_REQUESTï¼ŒSCOPE_SESSIONå››ä¸ªï¼Œæœ€å¤šç”¨çš„ä¸ºSCOPE_PROTOTYPEï¼ŒSCOPE_SINGLETONï¼Œä¸€ä¸ªä¸ºå¤šä¾‹æ¨¡å¼ï¼Œä¸€ä¸ªä¸ºå•ä¾‹æ¨¡å¼ï¼Œå…¶ä¸­é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ã€‚</li><li>æ‡’åŠ è½½ @Lazy  åœ¨é»˜è®¤å•ä¾‹æ¨¡å¼ä¸­ï¼Œåªè¦åˆ›å»ºå®¹å™¨ï¼Œè¿˜æ²¡æœ‰åˆ›å®ä¾‹ä¹‹å‰ï¼Œå°±ä¼šå®Œæˆæ–¹æ³•ï¼ŒåŠ å…¥å•ä¾‹æ¨¡å¼åï¼Œåªæœ‰åˆ›å»ºå®ä¾‹æ‰ä¼šå®Œæˆæ–¹æ³•ã€‚</li></ul><p>4.æŒ‰æ¡ä»¶åˆ¤æ–­æ˜¯å¦åˆ›å»ºbeanå®¹å™¨<br>å½“ä½¿ç”¨@Conditional()æ³¨è§£åï¼Œåœ¨åˆ›å»ºbeanå®¹å™¨ä¹‹å‰ä¼šå…ˆåˆ¤æ–­@Conditional()ä¸­çš„æ¡ä»¶æœ‰æ²¡æœ‰æˆç«‹ï¼Œåªæœ‰æˆç«‹åæ‰ä¼šåˆ›å»ºbeanå®¹å™¨ã€‚<br>Conditionalæºç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Conditional &#123;<br><span class="hljs-comment">/**<br> * All &#123;<span class="hljs-doctag">@link</span> Condition&#125;s that must &#123;<span class="hljs-doctag">@linkplain</span> Condition#matches match&#125;<br> * in order for the component to be registered.<br> */</span><br>Class&lt;? extends Condition&gt;[] value();<br><br>&#125;<br></code></pre></td></tr></table></figure></p><p>ä½¿ç”¨æ­¤æ³¨è§£éœ€è¦å®ç°Conditionæ¥å£ï¼Œå®ç°matches()æ–¹æ³•ã€‚ä¸¾ä¾‹ä»£ç <br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WindowsCondition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Condition</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">matches</span><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;<br>        Environment environment = context.getEnvironment();<br>        String property = environment.getProperty(<span class="hljs-string">"os.name"</span>);<br>        <span class="hljs-keyword">return</span> property.contains(<span class="hljs-string">"Windows"</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p><p>5  å…¶ä»–åˆ›å»ºbeanå®¹å™¨çš„æ³¨è§£</p><ul><li>@Importæ³¨è§£<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Import &#123;<br><span class="hljs-comment">/**<br> * &#123;<span class="hljs-doctag">@link</span> Configuration&#125;, &#123;<span class="hljs-doctag">@link</span> ImportSelector&#125;, &#123;<span class="hljs-doctag">@link</span> ImportBeanDefinitionRegistrar&#125;<br> * or regular component classes to import.<br> */</span><br>Class&lt;?&gt;[] value();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>åœ¨æ­¤æ³¨è§£ä¸­å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªéœ€è¦æ³¨å…¥ç±»çš„.clssçš„å±æ€§ï¼Œä¹Ÿå¯ä»¥å†™ImportSelector.classä¸ImportBeanDefinitionRegistrar.class<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import</span>(&#123;Color.class, MyImportSelector.class, MyImportBeanDefinitionRegistrar.class&#125;)<br></code></pre></td></tr></table></figure></p><ul><li>ImportSelector<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ImportSelector</span> </span>&#123;<br><span class="hljs-comment">/**<br> * Select and return the names of which class(es) should be imported based on<br> * the &#123;<span class="hljs-doctag">@link</span> AnnotationMetadata&#125; of the importing @&#123;<span class="hljs-doctag">@link</span> Configuration&#125; class.<br> */</span><br>String[] selectImports(AnnotationMetadata importingClassMetadata);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>å®ç°ImportSelectoræ¥å£ï¼Œè¿”å›String[]</p><ul><li>ImportBeanDefinitionRegistrar<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ImportBeanDefinitionRegistrar</span> </span>&#123;<br><span class="hljs-comment">/**<br> * Register bean definitions as necessary based on the given annotation metadata of<br> * the importing &#123;<span class="hljs-doctag">@code</span> <span class="hljs-doctag">@Configuration</span>&#125; class.<br> * &lt;p&gt;Note that &#123;<span class="hljs-doctag">@link</span> BeanDefinitionRegistryPostProcessor&#125; types may &lt;em&gt;not&lt;/em&gt; be<br> * registered here, due to lifecycle constraints related to &#123;<span class="hljs-doctag">@code</span> <span class="hljs-doctag">@Configuration</span>&#125;<br> * class processing.<br> * <span class="hljs-doctag">@param</span> importingClassMetadata annotation metadata of the importing class<br> * <span class="hljs-doctag">@param</span> registry current bean definition registry<br> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerBeanDefinitions</span><span class="hljs-params">(<br>AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&quot;&gt;&lt;a href=&quot;#springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&quot; class=&quot;headerlink&quot; title=&quot;springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&quot;&gt;&lt;/a&gt;springä¸€ä¸ªé‡è¦çš„æŠ€æœ¯æ˜¯Iocä¸DI&lt;/h4&gt;&lt;p&gt;1.åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ä¼šåˆ›å»ºä¸€ä¸ªxmlæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªbeanï¼Œå¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;hljs highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;people&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;cn.hdu.bean.Person&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;lisi&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;       &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;22&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
